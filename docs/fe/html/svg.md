# SVG

## 介绍

**可缩放矢量图形（Scalable Vector Graphics，SVG）**，是一种用于描述基于二维的矢量图形的，基于 XML 的标记语言。

[MDN 参考](https://developer.mozilla.org/zh-CN/docs/Web/SVG)

优点：

- 保真，不会失真，体积小
- 灵活，可以用 CSS 和 JS 来操作

SVG 可以成为任何复杂的组合图形，支持渐变、旋转、滤镜效果、JavaScript 接口等功能。

- SVG 使用的坐标系是以页面的左上角为(0,0)坐标点
- 向右是 x 轴正方向，向下是 y 轴正方向
- 以像素为坐标单位

## svg 标签

`<svg>`表示根元素

```html
<svg width="300" height="200">
  <rect width="100%" height="100%" fill="red" />
  <circle cx="150" cy="100" r="80" fill="green" />
  <text x="150" y="125" font-size="60" text-anchor="middle" fill="white">SVG</text>
</svg>
```

示例定义了一个 `300*200px` 的 SVG 画布，`x="150" y="125"`表示坐标位置(150,125)，`cx="150" cy="100"`表示圆心位置(150,100)

```html
<svg width="200" height="200" viewBox="0 0 100 100"></svg>
```

这里定义的画布尺寸是 `200*200px`。但是，**viewBox 属性定义了画布上可以显示的区域**：从(0,0)点开始，100 宽 x 100 高的区域。这个 100 x 100 的区域，会放到 `200*200` 的画布上显示，于是就形成了放大两倍的效果。可以将 viewBox 理解为截图

```css
viewBox(min-x min-y width height)
```

## path 标签

`<path>`元素是 SVG 基本形状中最强大的一个，没有之一。

`<path>`元素的形状是通过属性 **d** 定义的，属性 d 的值是一个“命令+参数”的序列。

**每一个命令都用一个关键字母来表示**，命令有两种表示方式：

1. 用大写字母，表示采用绝对定位
2. 用小写字母，表示采用相对定位（相对上一个点定位）

| 指令 | 参数                                                | 含义                                                                              |
| ---- | --------------------------------------------------- | --------------------------------------------------------------------------------- |
| M    | x y                                                 | 将画笔移动到点(x,y)，仅仅是移动画笔，但不画线                                     |
| L    | x y                                                 | 画笔从当前的点绘制线段到点(x,y)                                                   |
| H    | x                                                   | 画笔从当前的点绘制水平线段到点(x,y0)，y0 表示绘制前画笔所在 y 轴坐标，即 y 轴不变 |
| V    | y                                                   | 画笔从当前的点绘制竖直线段到点(x0,y)，x0 表示绘制前画笔所在 x 轴坐标，即 x 轴不变 |
| A    | rx ry x-axis-rotation large-arc-flag sweep-flag x y | 画笔从当前的点绘制一段圆弧到点(x,y)                                               |
| C    | x1 y1, x2 y2, x y                                   | 画笔从当前的点绘制一段三次贝塞尔曲线到点(x,y)                                     |
| S    | x2 y2, x y                                          | 特殊版本的三次贝塞尔曲线(省略第一个控制点)                                        |
| Q    | x1 y1, x y                                          | 绘制二次贝塞尔曲线到点(x,y)                                                       |
| T    | x y                                                 | 特殊版本的二次贝塞尔曲线(省略控制点)                                              |
| Z    | 无参数                                              | 会从当前点画一条直线到路径的起点，绘制闭合图形                                    |

示例：

```html
<svg width="200" height="200">
  <path d="M10 10 H 90 V 90 H 10 L 10 10" />
  <path d="M10 10 h 80 v 80 h -80 Z" />
  <path d="M90 20 H 120 V 120 H 20 L 100 80 L 60 70" fill="#f00" />
</svg>
```

第一个路径是：画笔移动到起点(10,10)，水平移动到 x=90 的位置，垂直移动到 y=90 的位置，水平移动到 x=10 的位置，最后回到起点。

第二个路径是：画笔移动到起点(10,10)，右移 80px 画一条水平线，下移 80px 画一条垂直线，左移 80px，最后回到起点。

前两个路径都是画了一个矩形。填充色默认黑色。

## 基本图形

| 图形   | 标签         | 模板                                                                                                 | 含义                                                                                            |
| ------ | ------------ | ---------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------- |
| 矩形   | `<rect>`     | `<rect x="60" y="10" rx="10" ry="10" width="30" height="30"/>`                                       | x:起点横坐标，y:起点纵坐标，rx:倒角 x 轴方向半径，ry:倒角 x 轴方向半径，width:宽度，height:高度 |
| 圆形   | `<circle>`   | `<circle cx="100" cy="100" r="50" fill="#fff"></circle>`                                             | cx:圆心横坐标，cy:圆心纵坐标，r:半径                                                            |
| 椭圆   | `<ellipse>`  | `<ellipse cx="75" cy="75" rx="20" ry="5"/>`                                                          | cx:椭圆心横坐标，cy:椭圆心纵坐标，rx:椭圆 x 轴方向半径，ry:椭圆 y 轴方向半径                    |
| 直线   | `<line>`     | `<line x1="10" x2="50" y1="110" y2="150"/>`                                                          | x1，y1:起点，x2，y2:终点                                                                        |
| 折线   | `<polyline>` | `<polyline points="60 110, 65 120, 70 115, 75 130, 80 125, 85 140, 90 135, 95 150, 100 145"/>`       | 每两个点以空格配对为一个坐标点，逗号隔开形成坐标集合。连成折线。                                |
| 多边形 | `<polygon>`  | `<polygon points="50 160, 55 180, 70 180, 60 190, 65 205, 50 195, 35 205, 40 190, 30 180, 45 180"/>` | 类似折线，最后一个点会自动闭合第一个点，形成闭环。                                              |

## 贝塞尔曲线

控制点描述的是曲线起始点的斜率，曲线上各个点的斜率，是从起点斜率到终点斜率的渐变过程。

三次贝塞尔曲线 C，控制点(x1,y1)和(x2,y2)，终点(x,y)

语法：`C x1 y1, x2 y2, x y`

```html
<path d="M10 10 C 20 20, 40 20, 50 10" />
```

通常情况下，一个点某一侧的控制点是它另一侧的控制点的对称（以保持斜率不变）。

S 命令可以用来创建与前面一样的贝塞尔曲线，但是，如果 S 命令跟在一个 C 或 S 命令后面，则它的第一个控制点会被假设成前一个命令曲线的第二个控制点的中心对称点。如果 S 命令单独使用，前面没有 C 或 S 命令，那当前点将作为第一个控制点。

```html
<path d="M10 80 C 40 10, 65 10, 95 80 S 150 150, 180 80" />
```

二次贝塞尔曲线 Q，只需要一个控制点，用来确定起点和终点的曲线斜率。

```html
<path d="M10 80 Q 95 10 180 80" />
```

T 命令可以用来创建与前面一样的二次贝塞尔曲线，通过前一个控制点，推断出一个新的控制点。这意味着，在第一个控制点后面，可以只定义终点，就创建出一个相当复杂的曲线。需要注意的是，T 命令前面必须是一个 Q 命令，或者是另一个 T 命令，才能达到这种效果。如果 T 单独使用，那么控制点就会被认为和终点是同一个点，所以画出来的将是一条直线。

```html
<path d="M10 80 Q 52.5 10, 95 80 T 180 80" />
```

## symbol 标签

symbol 标签可以用来定义矢量图形，然后在其他地方引用。

```html
<svg>
  <symbol id="icon1" viewBox="0 0 40 40">
    <circle fill="#000" opacity="0.2" cx="20" cy="20" r="20"></circle>
  </symbol>
</svg>
```

只有使用了`<use>`标签，才能使用 symbol 标签定义的矢量图形。

```html
<use xlink:href="#icon1"></use>
```

## g 标签

g 标签定义一个可复用的模块

```html
<g style="fill: #1994d0;">
  <path id="icon1" class="cls-4" d="M20,33Z" style="stroke: inherit; filter: none; fill: inherit" />
</g>

<use xlink:href="#icon1" style="stroke: url(#linear-gradient); filter: none; fill: none" />
```

## 动画

动画方案：CSS、JS

### 路径动画

`stroke-dasharray`、`stroke-dashoffset`
