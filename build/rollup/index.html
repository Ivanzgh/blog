<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>rollup | zghIvan</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/blog/img/logo.png">
    <meta name="description" content="Blog">
    
    <link rel="preload" href="/blog/assets/css/0.styles.4ccb1f2e.css" as="style"><link rel="preload" href="/blog/assets/js/app.664e5f3f.js" as="script"><link rel="preload" href="/blog/assets/js/2.f5f64370.js" as="script"><link rel="preload" href="/blog/assets/js/23.d754369b.js" as="script"><link rel="preload" href="/blog/assets/js/3.45b73244.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.769e0ee5.js"><link rel="prefetch" href="/blog/assets/js/11.5b4f4313.js"><link rel="prefetch" href="/blog/assets/js/12.387f3fd1.js"><link rel="prefetch" href="/blog/assets/js/13.7364ae62.js"><link rel="prefetch" href="/blog/assets/js/14.f009bd2a.js"><link rel="prefetch" href="/blog/assets/js/15.029cd9f6.js"><link rel="prefetch" href="/blog/assets/js/16.ca5b8b93.js"><link rel="prefetch" href="/blog/assets/js/17.9d7b87b1.js"><link rel="prefetch" href="/blog/assets/js/18.1893a156.js"><link rel="prefetch" href="/blog/assets/js/19.0c4c5c02.js"><link rel="prefetch" href="/blog/assets/js/20.39adaff9.js"><link rel="prefetch" href="/blog/assets/js/21.153df3f5.js"><link rel="prefetch" href="/blog/assets/js/22.6a2b9ea1.js"><link rel="prefetch" href="/blog/assets/js/24.57b65194.js"><link rel="prefetch" href="/blog/assets/js/25.fd9bffe8.js"><link rel="prefetch" href="/blog/assets/js/26.f570d022.js"><link rel="prefetch" href="/blog/assets/js/27.046a5099.js"><link rel="prefetch" href="/blog/assets/js/28.4d28f69f.js"><link rel="prefetch" href="/blog/assets/js/29.415151f7.js"><link rel="prefetch" href="/blog/assets/js/30.d66d0c9e.js"><link rel="prefetch" href="/blog/assets/js/31.df5e3fe0.js"><link rel="prefetch" href="/blog/assets/js/32.864f6ac2.js"><link rel="prefetch" href="/blog/assets/js/33.073c4453.js"><link rel="prefetch" href="/blog/assets/js/34.9de65cb3.js"><link rel="prefetch" href="/blog/assets/js/35.8d0f59a0.js"><link rel="prefetch" href="/blog/assets/js/36.e8abfdab.js"><link rel="prefetch" href="/blog/assets/js/37.c9f8c5c6.js"><link rel="prefetch" href="/blog/assets/js/38.f14eec4b.js"><link rel="prefetch" href="/blog/assets/js/39.435bbd19.js"><link rel="prefetch" href="/blog/assets/js/4.36acbec0.js"><link rel="prefetch" href="/blog/assets/js/40.47eae9b9.js"><link rel="prefetch" href="/blog/assets/js/41.1faa1058.js"><link rel="prefetch" href="/blog/assets/js/42.1dee3e1b.js"><link rel="prefetch" href="/blog/assets/js/43.b949236d.js"><link rel="prefetch" href="/blog/assets/js/44.d4366b02.js"><link rel="prefetch" href="/blog/assets/js/45.ec674f51.js"><link rel="prefetch" href="/blog/assets/js/46.23bd2d3e.js"><link rel="prefetch" href="/blog/assets/js/47.b899d68d.js"><link rel="prefetch" href="/blog/assets/js/48.9e5c59b6.js"><link rel="prefetch" href="/blog/assets/js/49.89e0f1e4.js"><link rel="prefetch" href="/blog/assets/js/5.b8f6b4a1.js"><link rel="prefetch" href="/blog/assets/js/50.029ffdae.js"><link rel="prefetch" href="/blog/assets/js/51.f096c437.js"><link rel="prefetch" href="/blog/assets/js/52.9e8bb209.js"><link rel="prefetch" href="/blog/assets/js/53.8f57b822.js"><link rel="prefetch" href="/blog/assets/js/54.eff5bc8d.js"><link rel="prefetch" href="/blog/assets/js/55.36b6a1b2.js"><link rel="prefetch" href="/blog/assets/js/56.2e141381.js"><link rel="prefetch" href="/blog/assets/js/57.963df056.js"><link rel="prefetch" href="/blog/assets/js/58.9239dd24.js"><link rel="prefetch" href="/blog/assets/js/59.3d0b3641.js"><link rel="prefetch" href="/blog/assets/js/6.a0456051.js"><link rel="prefetch" href="/blog/assets/js/60.296883e4.js"><link rel="prefetch" href="/blog/assets/js/61.11e16a4a.js"><link rel="prefetch" href="/blog/assets/js/62.142d540a.js"><link rel="prefetch" href="/blog/assets/js/63.4f4a0168.js"><link rel="prefetch" href="/blog/assets/js/64.9985f8d7.js"><link rel="prefetch" href="/blog/assets/js/65.02605a52.js"><link rel="prefetch" href="/blog/assets/js/66.08ead113.js"><link rel="prefetch" href="/blog/assets/js/67.c18a124f.js"><link rel="prefetch" href="/blog/assets/js/68.9d50a23c.js"><link rel="prefetch" href="/blog/assets/js/69.2b865a98.js"><link rel="prefetch" href="/blog/assets/js/7.791d5a0d.js"><link rel="prefetch" href="/blog/assets/js/70.20fa9896.js"><link rel="prefetch" href="/blog/assets/js/71.ef331339.js"><link rel="prefetch" href="/blog/assets/js/72.42a00b56.js"><link rel="prefetch" href="/blog/assets/js/73.679a7767.js"><link rel="prefetch" href="/blog/assets/js/74.f528f91b.js"><link rel="prefetch" href="/blog/assets/js/75.3045a00e.js"><link rel="prefetch" href="/blog/assets/js/76.9a1312d4.js"><link rel="prefetch" href="/blog/assets/js/77.54655403.js"><link rel="prefetch" href="/blog/assets/js/78.fc8de30c.js"><link rel="prefetch" href="/blog/assets/js/79.7d38e7ef.js"><link rel="prefetch" href="/blog/assets/js/8.400fae49.js"><link rel="prefetch" href="/blog/assets/js/80.879662a7.js"><link rel="prefetch" href="/blog/assets/js/81.89c6e63f.js"><link rel="prefetch" href="/blog/assets/js/82.516920b3.js"><link rel="prefetch" href="/blog/assets/js/83.dd2145e2.js"><link rel="prefetch" href="/blog/assets/js/84.f0f60856.js"><link rel="prefetch" href="/blog/assets/js/85.bbba28c4.js"><link rel="prefetch" href="/blog/assets/js/86.890b6f26.js"><link rel="prefetch" href="/blog/assets/js/87.f5baa7da.js"><link rel="prefetch" href="/blog/assets/js/88.c75ed574.js"><link rel="prefetch" href="/blog/assets/js/9.7f62cf4d.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.4ccb1f2e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/img/logo.png" alt="zghIvan" class="logo"> <span class="site-name can-hide">zghIvan</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/fe/html/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/blog/fe/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/blog/fe/js/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/blog/fe/ts/" class="nav-link">
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/blog/fe/browser/" class="nav-link">
  浏览器
</a></li><li class="dropdown-item"><!----> <a href="/blog/fe/mobile/" class="nav-link">
  移动端开发
</a></li><li class="dropdown-item"><!----> <a href="/blog/fe/plugin/" class="nav-link">
  前端插件
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架和库" class="dropdown-title"><span class="title">框架和库</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架和库" class="mobile-dropdown-title"><span class="title">框架和库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/fe/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/blog/fe/react/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/blog/fe/node/" class="nav-link">
  Node
</a></li><li class="dropdown-item"><!----> <a href="/blog/fe/express/" class="nav-link">
  Express
</a></li><li class="dropdown-item"><!----> <a href="/blog/fe/koa/" class="nav-link">
  Koa
</a></li><li class="dropdown-item"><!----> <a href="/blog/fe/mongodb/" class="nav-link">
  MongoDB
</a></li><li class="dropdown-item"><!----> <a href="/blog/fe/wx/" class="nav-link">
  微信小程序
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><span class="title">工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具" class="mobile-dropdown-title"><span class="title">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/fe/npm/" class="nav-link">
  NPM
</a></li><li class="dropdown-item"><!----> <a href="/blog/fe/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/blog/build/webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/blog/build/gulp/" class="nav-link">
  Gulp
</a></li><li class="dropdown-item"><!----> <a href="/blog/build/rollup/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  rollup
</a></li><li class="dropdown-item"><!----> <a href="/blog/utils/" class="nav-link">
  Others
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/be/docker/" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/blog/be/nginx/" class="nav-link">
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/blog/be/mysql/" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/blog/be/tomcat/" class="nav-link">
  Tomcat
</a></li><li class="dropdown-item"><!----> <a href="/blog/be/elasticsearch/" class="nav-link">
  ElasticSearch
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="可视化" class="dropdown-title"><span class="title">可视化</span> <span class="arrow down"></span></button> <button type="button" aria-label="可视化" class="mobile-dropdown-title"><span class="title">可视化</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/vis/openlayers/" class="nav-link">
  OpenLayers
</a></li><li class="dropdown-item"><!----> <a href="/blog/vis/leaflet/" class="nav-link">
  Leaflet
</a></li><li class="dropdown-item"><!----> <a href="/blog/vis/geoserver/" class="nav-link">
  GeoServer
</a></li><li class="dropdown-item"><!----> <a href="/blog/vis/cesium/" class="nav-link">
  Cesium
</a></li><li class="dropdown-item"><!----> <a href="/blog/vis/three/" class="nav-link">
  Three
</a></li><li class="dropdown-item"><!----> <a href="/blog/vis/maptalks/" class="nav-link">
  Maptalks
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机基础" class="mobile-dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/base/network/" class="nav-link">
  网络
</a></li><li class="dropdown-item"><!----> <a href="/blog/base/algorithm/" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/blog/base/data-structure/" class="nav-link">
  数据结构
</a></li><li class="dropdown-item"><!----> <a href="/blog/base/os/" class="nav-link">
  操作系统
</a></li><li class="dropdown-item"><!----> <a href="/blog/base/design-pattern/" class="nav-link">
  设计模式
</a></li></ul></div></div><div class="nav-item"><a href="/blog/thought/" class="nav-link">
  随笔
</a></div><div class="nav-item"><a href="https://github.com/Ivanzgh" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/fe/html/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/blog/fe/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/blog/fe/js/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/blog/fe/ts/" class="nav-link">
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/blog/fe/browser/" class="nav-link">
  浏览器
</a></li><li class="dropdown-item"><!----> <a href="/blog/fe/mobile/" class="nav-link">
  移动端开发
</a></li><li class="dropdown-item"><!----> <a href="/blog/fe/plugin/" class="nav-link">
  前端插件
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架和库" class="dropdown-title"><span class="title">框架和库</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架和库" class="mobile-dropdown-title"><span class="title">框架和库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/fe/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/blog/fe/react/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/blog/fe/node/" class="nav-link">
  Node
</a></li><li class="dropdown-item"><!----> <a href="/blog/fe/express/" class="nav-link">
  Express
</a></li><li class="dropdown-item"><!----> <a href="/blog/fe/koa/" class="nav-link">
  Koa
</a></li><li class="dropdown-item"><!----> <a href="/blog/fe/mongodb/" class="nav-link">
  MongoDB
</a></li><li class="dropdown-item"><!----> <a href="/blog/fe/wx/" class="nav-link">
  微信小程序
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><span class="title">工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具" class="mobile-dropdown-title"><span class="title">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/fe/npm/" class="nav-link">
  NPM
</a></li><li class="dropdown-item"><!----> <a href="/blog/fe/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/blog/build/webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/blog/build/gulp/" class="nav-link">
  Gulp
</a></li><li class="dropdown-item"><!----> <a href="/blog/build/rollup/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  rollup
</a></li><li class="dropdown-item"><!----> <a href="/blog/utils/" class="nav-link">
  Others
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/be/docker/" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/blog/be/nginx/" class="nav-link">
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/blog/be/mysql/" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/blog/be/tomcat/" class="nav-link">
  Tomcat
</a></li><li class="dropdown-item"><!----> <a href="/blog/be/elasticsearch/" class="nav-link">
  ElasticSearch
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="可视化" class="dropdown-title"><span class="title">可视化</span> <span class="arrow down"></span></button> <button type="button" aria-label="可视化" class="mobile-dropdown-title"><span class="title">可视化</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/vis/openlayers/" class="nav-link">
  OpenLayers
</a></li><li class="dropdown-item"><!----> <a href="/blog/vis/leaflet/" class="nav-link">
  Leaflet
</a></li><li class="dropdown-item"><!----> <a href="/blog/vis/geoserver/" class="nav-link">
  GeoServer
</a></li><li class="dropdown-item"><!----> <a href="/blog/vis/cesium/" class="nav-link">
  Cesium
</a></li><li class="dropdown-item"><!----> <a href="/blog/vis/three/" class="nav-link">
  Three
</a></li><li class="dropdown-item"><!----> <a href="/blog/vis/maptalks/" class="nav-link">
  Maptalks
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机基础" class="mobile-dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/base/network/" class="nav-link">
  网络
</a></li><li class="dropdown-item"><!----> <a href="/blog/base/algorithm/" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/blog/base/data-structure/" class="nav-link">
  数据结构
</a></li><li class="dropdown-item"><!----> <a href="/blog/base/os/" class="nav-link">
  操作系统
</a></li><li class="dropdown-item"><!----> <a href="/blog/base/design-pattern/" class="nav-link">
  设计模式
</a></li></ul></div></div><div class="nav-item"><a href="/blog/thought/" class="nav-link">
  随笔
</a></div><div class="nav-item"><a href="https://github.com/Ivanzgh" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span></span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/build/rollup/" aria-current="page" class="active sidebar-link">rollup</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/build/rollup/#快速上手" class="sidebar-link">快速上手</a></li><li class="sidebar-sub-header"><a href="/blog/build/rollup/#配置文件" class="sidebar-link">配置文件</a></li><li class="sidebar-sub-header"><a href="/blog/build/rollup/#插件" class="sidebar-link">插件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/build/rollup/#支持-es6-语法" class="sidebar-link">支持 ES6 语法</a></li><li class="sidebar-sub-header"><a href="/blog/build/rollup/#支持-commonjs-规范" class="sidebar-link">支持 CommonJS 规范</a></li><li class="sidebar-sub-header"><a href="/blog/build/rollup/#css-处理" class="sidebar-link">CSS 处理</a></li><li class="sidebar-sub-header"><a href="/blog/build/rollup/#代码压缩" class="sidebar-link">代码压缩</a></li><li class="sidebar-sub-header"><a href="/blog/build/rollup/#热更新" class="sidebar-link">热更新</a></li></ul></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="rollup"><a href="#rollup" class="header-anchor">#</a> rollup</h1> <p>官网：<a href="https://rollupjs.org/guide/en/" target="_blank" rel="noopener noreferrer">https://rollupjs.org/guide/en/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>仓库地址：<a href="https://github.com/rollup/rollup" target="_blank" rel="noopener noreferrer">https://github.com/rollup/rollup<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>中文文档：<a href="https://www.rollupjs.com/" target="_blank" rel="noopener noreferrer">https://www.rollupjs.com/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><code>Rollup</code> 是一个<code>JavaScript</code>模块打包器，可以将小块代码编译成大块复杂的代码，例如 library 或应用程序。</p> <h2 id="快速上手"><a href="#快速上手" class="header-anchor">#</a> 快速上手</h2> <p>安装</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> i rollup -g        <span class="token comment"># 全局安装</span>
<span class="token function">npm</span> i rollup -D        <span class="token comment"># 项目本地安装</span>
</code></pre></div><p>首先初始化一个项目<code>npm init -y</code>，在<code>src</code>文件夹下新建<code>main.js</code>和<code>foo.js</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// foo.js</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// main.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> hello <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./foo.js'</span>

<span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>在<code>package.json</code>中添加打包命令，然后执行<code>npm run build</code>即可得到打包后的<code>bundle.js</code></p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token string">&quot;build&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;rollup -i src/main.js -o dist/bundle.js -f es&quot;</span>
</code></pre></div><ul><li><code>-i</code>（--input）后面的<code>src/main.js</code>表示入口文件</li> <li><code>-o</code>（--output.file）后面的<code>dist/bundle.js</code>表示打包后的文件目录</li> <li><code>-f</code>（--format）指定打包格式，<code>es</code>表示 ESM，即<code>ES6</code>模块规范</li></ul> <h2 id="配置文件"><a href="#配置文件" class="header-anchor">#</a> 配置文件</h2> <p>在项目根目录下新建一个<code>rollup.config.js</code>文件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  input<span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    file<span class="token operator">:</span> <span class="token string">'./dist/bundle.js'</span><span class="token punctuation">,</span>
    format<span class="token operator">:</span> <span class="token string">'es'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>然后修改打包命令为<code>&quot;build&quot;: &quot;rollup -c&quot;</code>即可</p> <p>也可以按多种规范打包，如下配置会得到 3 个不同的文件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  input<span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      file<span class="token operator">:</span> <span class="token string">'./dist/bundle-umd.js'</span><span class="token punctuation">,</span>
      format<span class="token operator">:</span> <span class="token string">'umd'</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">'bundle'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      file<span class="token operator">:</span> <span class="token string">'./dist/bundle-es.js'</span><span class="token punctuation">,</span>
      format<span class="token operator">:</span> <span class="token string">'es'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      file<span class="token operator">:</span> <span class="token string">'./dist/bundle-cjs.js'</span><span class="token punctuation">,</span>
      format<span class="token operator">:</span> <span class="token string">'cjs'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>rollup 支持的打包文件的格式有<code>amd</code>、<code>cjs</code>、<code>es/esm</code>、<code>iife</code>、<code>umd</code></p> <p>其中<code>amd</code>为<code>AMD</code>规范，<code>cjs</code>为<code>CommonJS</code>规范，<code>esm/es</code>为<code>ES</code>模块规范，<code>iife</code>为立即调用函数，
<code>umd</code>同时支持 <code>amd</code>、<code>cjs</code> 和 <code>iife</code></p> <h2 id="插件"><a href="#插件" class="header-anchor">#</a> 插件</h2> <h3 id="支持-es6-语法"><a href="#支持-es6-语法" class="header-anchor">#</a> 支持 ES6 语法</h3> <p><code>rollup-plugin-babel</code>用于转换 ES6 语法</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> i rollup-plugin-babel @babel/core @babel/preset-env -D
</code></pre></div><p>首先配置<code>rollup.config.js</code>文件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> babel <span class="token keyword">from</span> <span class="token string">'rollup-plugin-babel'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  input<span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    file<span class="token operator">:</span> <span class="token string">'./dist/bundle.js'</span><span class="token punctuation">,</span>
    format<span class="token operator">:</span> <span class="token string">'es'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">babel</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      exclude<span class="token operator">:</span> <span class="token string">'node_modules/**'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>然后在项目根目录下新建<code>.babelrc</code>文件</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="支持-commonjs-规范"><a href="#支持-commonjs-规范" class="header-anchor">#</a> 支持 CommonJS 规范</h3> <p>rollup 默认不支持<code>CommonJS</code>规范，但是第三方库可能使用的是<code>cjs</code>，配置<code>rollup-plugin-commonjs</code>插件即可</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> i rollup-plugin-commonjs -D
</code></pre></div><p>配置<code>rollup.config.js</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> commonjs <span class="token keyword">from</span> <span class="token string">'rollup-plugin-commonjs'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  input<span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    file<span class="token operator">:</span> <span class="token string">'./dist/bundle.js'</span><span class="token punctuation">,</span>
    format<span class="token operator">:</span> <span class="token string">'es'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">commonjs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="css-处理"><a href="#css-处理" class="header-anchor">#</a> CSS 处理</h3> <p><code>rollup-plugin-postcss</code>插件支持 css 文件的加载、css 加前缀、css 压缩、对 scss/less 的支持等</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> i rollup-plugin-postcss postcss -D
</code></pre></div><p><code>rollup.config.js</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> postcss <span class="token keyword">from</span> <span class="token string">'rollup-plugin-postcss'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  input<span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    file<span class="token operator">:</span> <span class="token string">'./dist/bundle.js'</span><span class="token punctuation">,</span>
    format<span class="token operator">:</span> <span class="token string">'es'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">postcss</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>autoprefixer</code>插件可以自动给 css 加前缀</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> i autoprefixer@9.8.6 -D
</code></pre></div><p>css 压缩</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> i cssnano cssnano-preset-default -D
</code></pre></div><p>抽离 css 文件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">postcss</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">autoprefixer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cssnano</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  extract<span class="token operator">:</span> <span class="token string">'css/index.css'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>默认支持 scss、less、stylus</p> <h3 id="代码压缩"><a href="#代码压缩" class="header-anchor">#</a> 代码压缩</h3> <p><code>rollup-plugin-terser</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> terser <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rollup-plugin-terser'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">terser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="热更新"><a href="#热更新" class="header-anchor">#</a> 热更新</h3> <p><code>rollup-plugin-serve</code>用于启动一个服务器，<code>rollup-plugin-livereload</code>用于文件变化时，实时刷新页面</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> serve <span class="token keyword">from</span> <span class="token string">'rollup-plugin-serve'</span>
<span class="token keyword">import</span> livereload <span class="token keyword">from</span> <span class="token string">'rollup-plugin-livereload'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  input<span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    file<span class="token operator">:</span> <span class="token string">'./dist/bundle-umd.js'</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">'umd'</span><span class="token punctuation">,</span>
    format<span class="token operator">:</span> <span class="token string">'umd'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">serve</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      contentBase<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">//服务器启动的文件夹，默认是项目根目录，需要在该文件下创建index.html</span>
      port<span class="token operator">:</span> <span class="token number">8081</span> <span class="token comment">//端口号，默认10001</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">livereload</span><span class="token punctuation">(</span><span class="token string">'dist'</span><span class="token punctuation">)</span> <span class="token comment">//监听dist目录，当目录中的文件发生变化时，刷新页面</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在<code>index.html</code>中引入打包文件<code>&lt;script src=&quot;./dist/bundle-umd.js&quot;&gt;&lt;/script&gt;</code></p> <p>此时修改src下的源代码并不会刷新页面，需更改打包命令为<code>&quot;build&quot;: &quot;rollup -wc&quot;</code>即可，添加<code>-w</code>或<code>--watch</code></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">12/10/2021, 10:03:14 AM</span></div></footer> <!----> </main></div><div class="global-ui"><!----><!----><div data-v-911815b6><div class="cat-container" style="display:;" data-v-911815b6><canvas id="vuepress-cat" width="280" height="250" class="live2d" data-v-911815b6></canvas></div></div></div></div>
    <script src="/blog/assets/js/app.664e5f3f.js" defer></script><script src="/blog/assets/js/2.f5f64370.js" defer></script><script src="/blog/assets/js/23.d754369b.js" defer></script><script src="/blog/assets/js/3.45b73244.js" defer></script>
  </body>
</html>
