(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{423:function(t,a,s){"use strict";s.r(a);var e=s(19),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"npm"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npm"}},[t._v("#")]),t._v(" NPM")]),t._v(" "),s("p",[t._v("npm 官网："),s("a",{attrs:{href:"https://www.npmjs.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.npmjs.com/"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("npm 中文文档："),s("a",{attrs:{href:"https://www.npmjs.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.npmjs.cn/"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"常用指令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常用指令"}},[t._v("#")]),t._v(" 常用指令")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}},[t._v("order")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("Description")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("npm init")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("初始化，生成 package.json")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("npm install packname (简写 npm i )")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("安装依赖包，默认将依赖安装到生产环境中")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("npm uninstall packnae (简写 npm uni)")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("卸载依赖包")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("npm update packname")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("更新依赖包")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("npm install npm -g")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("npm 升级")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("npm config get registry")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("查看镜像地址")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("npm list -g")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("查看所有全局安装的模块")])])])]),t._v(" "),s("h2",{attrs:{id:"安装参数区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装参数区别"}},[t._v("#")]),t._v(" 安装参数区别")]),t._v(" "),s("h3",{attrs:{id:"全局安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#全局安装"}},[t._v("#")]),t._v(" 全局安装")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" packname -g\n")])])]),s("h3",{attrs:{id:"生产环境安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#生产环境安装"}},[t._v("#")]),t._v(" 生产环境安装")]),t._v(" "),s("p",[t._v("简写：-S ， 并在 package.json 的 dependencies 属性写入依赖。")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" packname --save\n")])])]),s("h3",{attrs:{id:"开发环境安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开发环境安装"}},[t._v("#")]),t._v(" 开发环境安装")]),t._v(" "),s("p",[t._v("简写：-D ， 并在 package.json 的 devDependencies 属性写入依赖。")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" packname --save-dev\n")])])]),s("h2",{attrs:{id:"切换淘宝镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#切换淘宝镜像"}},[t._v("#")]),t._v(" 切换淘宝镜像")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -g cnpm --registry"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("https://registry.npm.taobao.org\n")])])]),s("p",[t._v("安装成功后即可使用：")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("cnpm "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" packname\n")])])]),s("p",[t._v("切换回 npm 镜像：")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" config "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" registry https://registry.npmjs.org\n")])])]),s("p",[t._v("查看镜像源：")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" get registry\n")])])]),s("h2",{attrs:{id:"npm-发布插件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npm-发布插件"}},[t._v("#")]),t._v(" npm 发布插件")]),t._v(" "),s("p",[t._v("1、"),s("code",[t._v("npm init")]),t._v(" 初始化项目,生成 package.json 文件")]),t._v(" "),s("p",[t._v("2、敲代码")]),t._v(" "),s("p",[t._v("3、创建"),s("code",[t._v(".npmignore")]),t._v("文件，发布时会忽略里面的文件")]),t._v(" "),s("p",[t._v("4、创建 README.md 文件，添加插件描述")]),t._v(" "),s("p",[t._v("5、使用邮箱注册 npm 账号,官网："),s("a",{attrs:{href:"https://www.npmjs.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.npmjs.com/"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("6、在 npm 官网查看插件名是否已经注册")]),t._v(" "),s("p",[t._v("7、可以运行"),s("code",[t._v("npm whoami")]),t._v(" 查看当前用户是不是自己")]),t._v(" "),s("p",[t._v("8、在项目下运行 "),s("code",[t._v("npm login")]),t._v("，输入用户名、密码、邮箱")]),t._v(" "),s("p",[t._v("9、运行 "),s("code",[t._v("npm publish")])]),t._v(" "),s("p",[t._v("10、在 npm 官网查看是否发布成功")]),t._v(" "),s("h3",{attrs:{id:"npm-发布的插件版本号规则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npm-发布的插件版本号规则"}},[t._v("#")]),t._v(" npm 发布的插件版本号规则")]),t._v(" "),s("p",[t._v("语义版本号分为 X.Y.Z 三位，分别代表主版本号、次版本号和补丁版本号。")]),t._v(" "),s("ul",[s("li",[t._v("如果只是修复 bug，需要更新 Z 位。")]),t._v(" "),s("li",[t._v("如果是新增了功能，但是向下兼容，需要更新 Y 位。")]),t._v(" "),s("li",[t._v("如果有大变动，向下不兼容，需要更新 X 位。")])]),t._v(" "),s("h3",{attrs:{id:"插件升级"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#插件升级"}},[t._v("#")]),t._v(" 插件升级")]),t._v(" "),s("p",[t._v("首先运行以下命令之一，修改版本")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("npm version patch  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 补丁【1.0.1】")]),t._v("\nnpm version minor  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 小改【1.1.0】")]),t._v("\nnpm version major  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 大改【2.0.0】")]),t._v("\n")])])]),s("p",[t._v("然后再运行一遍发布命令即可")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("npm publish\n")])])]),s("h2",{attrs:{id:"package-json-和-package-lock-json-的区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#package-json-和-package-lock-json-的区别"}},[t._v("#")]),t._v(" package.json 和 package-lock.json 的区别")]),t._v(" "),s("p",[t._v("package.json 文件记录项目中所需要的所有模块。当执行 npm install 的时候，node 会先从 package.json 文件中读取所有 dependencies 信息，\n然后根据 dependencies 中的信息与 node_modules 中的模块进行对比，没有的直接下载，已有的检查更新（最新版本的 nodejs 不会更新，因为有 package-lock.json 文件）。\n另外，package.json 文件只记录通过"),s("code",[t._v("npm install")]),t._v("方式安装的模块信息，而这些模块所依赖的其他子模块的信息不会记录。")]),t._v(" "),s("p",[t._v("package-lock.json 文件锁定所有模块的版本号，包括主模块和所有依赖子模块。在执行"),s("code",[t._v("npm install")]),t._v("的时候，\nnode 从 package.json 文件读取模块名称，从 package-lock.json 文件中获取版本号，然后进行下载或者更新。\n因此，正因为有了 package-lock.json 文件锁定版本号，所以在执行"),s("code",[t._v("npm install")]),t._v("的时候，node 不会自动更新 package.json 文件中的模块，\n必须用"),s("code",[t._v("npm install packagename")]),t._v("（自动更新小版本号）或者"),s("code",[t._v("npm install packagename@x.x.x（指定版本号）")]),t._v("来进行安装才会更新，package-lock.json 文件中的版本号也会随着更新。")]),t._v(" "),s("p",[t._v("当 package.json 与 package-lock.json 都不存在，执行"),s("code",[t._v("npm install")]),t._v("时，node 会重新生成 package-lock.json 文件，然后把 node_modules 中的模块信息全部记入 package-lock.json 文件，\n但不会生成 package.json 文件，此时，可以通过"),s("code",[t._v("npm init")]),t._v("来初始化生成 package.json 文件。")]),t._v(" "),s("p",[s("strong",[t._v("总结：")])]),t._v(" "),s("p",[t._v("项目中引入的包版本号之前经常会加^号，每次在执行"),s("code",[t._v("npm install")]),t._v("之后，下载的包都会发生变化，\n为了系统的稳定性考虑，每次执行完"),s("code",[t._v("npm install")]),t._v("之后会创建或者更新 package-lock 文件。\n该文件记录了上一次安装的具体的版本号，相当于是提供了一个参考，在出现版本兼容性问题的时候，就可以参考这个文件来修改版本号即可。")])])}),[],!1,null,null,null);a.default=n.exports}}]);