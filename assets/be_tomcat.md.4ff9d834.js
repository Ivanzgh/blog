import{_ as a,c as s,o,Q as l}from"./chunks/framework.f14b72c3.js";const h=JSON.parse('{"title":"Tomcat","description":"","frontmatter":{},"headers":[],"relativePath":"be/tomcat.md","lastUpdated":1688050449000}'),n={name:"be/tomcat.md"},e=l(`<h1 id="tomcat" tabindex="-1">Tomcat <a class="header-anchor" href="#tomcat" aria-label="Permalink to &quot;Tomcat&quot;">​</a></h1><h2 id="安装" tabindex="-1">安装 <a class="header-anchor" href="#安装" aria-label="Permalink to &quot;安装&quot;">​</a></h2><p><a href="https://tomcat.apache.org/" target="_blank" rel="noreferrer">https://tomcat.apache.org/</a></p><p><a href="https://www.oracle.com/java/technologies/javase-downloads.html" target="_blank" rel="noreferrer">java jdk 下载</a></p><h2 id="配置-java-环境变量" tabindex="-1">配置 java 环境变量 <a class="header-anchor" href="#配置-java-环境变量" aria-label="Permalink to &quot;配置 java 环境变量&quot;">​</a></h2><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki dracula"><code><span class="line"><span style="color:#F8F8F2;">JAVA_HOME  </span><span style="color:#F1FA8C;">C:</span><span style="color:#FF79C6;">\\P</span><span style="color:#F1FA8C;">rogram</span><span style="color:#F8F8F2;"> </span><span style="color:#F1FA8C;">Files</span><span style="color:#FF79C6;">\\J</span><span style="color:#F1FA8C;">ava</span><span style="color:#FF79C6;">\\j</span><span style="color:#F1FA8C;">dk-14.0.2</span></span>
<span class="line"></span></code></pre></div><p>在 <code>Path</code> 中增加 <code>%JAVA_HOME%\\bin</code></p><h2 id="修改配置" tabindex="-1">修改配置 <a class="header-anchor" href="#修改配置" aria-label="Permalink to &quot;修改配置&quot;">​</a></h2><h3 id="修改端口" tabindex="-1">修改端口 <a class="header-anchor" href="#修改端口" aria-label="Permalink to &quot;修改端口&quot;">​</a></h3><p>在 conf 文件夹中找到 <code>server.xml</code> 文件，将 <code>8080</code> 端口号修改为 <code>80</code></p><div class="language-xml"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki dracula"><code><span class="line"><span style="color:#F8F8F2;">&lt;</span><span style="color:#FF79C6;">Connector</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">port</span><span style="color:#F8F8F2;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">80</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">protocol</span><span style="color:#F8F8F2;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">HTTP/1.1</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">connectionTimeout</span><span style="color:#F8F8F2;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">20000</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">redirectPort</span><span style="color:#F8F8F2;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">8443</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;"> /&gt;</span></span>
<span class="line"></span></code></pre></div><h3 id="部署项目" tabindex="-1">部署项目 <a class="header-anchor" href="#部署项目" aria-label="Permalink to &quot;部署项目&quot;">​</a></h3><p>方式一、在 <code>conf/server.xml</code> 中配置 <code>context</code></p><p><code>docBase</code> 是项目实际存放位置的根目录，映射为 path 虚拟目录；</p><div class="language-xml"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki dracula"><code><span class="line"><span style="color:#F8F8F2;">&lt;</span><span style="color:#FF79C6;">Host</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">name</span><span style="color:#F8F8F2;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">localhost</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">  </span><span style="color:#50FA7B;font-style:italic;">appBase</span><span style="color:#F8F8F2;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">webapps</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">unpackWARs</span><span style="color:#F8F8F2;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">true</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">autoDeploy</span><span style="color:#F8F8F2;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">true</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">xmlValidation</span><span style="color:#F8F8F2;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">false</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">xmlNamespaceAware</span><span style="color:#F8F8F2;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">false</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">      &lt;</span><span style="color:#FF79C6;">Context</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">path</span><span style="color:#F8F8F2;">=</span><span style="color:#E9F284;">&quot;&quot;</span><span style="color:#F8F8F2;">  </span><span style="color:#50FA7B;font-style:italic;">docBase</span><span style="color:#F8F8F2;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">C:\\bksxweb</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">reloadable</span><span style="color:#F8F8F2;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">true</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">/&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">&lt;/</span><span style="color:#FF79C6;">Host</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>方式二、在 tomcat 安装目录下找到 <code>webapps</code> 文件件，将项目放到里边</p><p>在 tomcat 下的 bin 文件夹中找到 <code>startup.bat</code> 双击启动，启动成功后在浏览器打开 <code>localhost</code> 即可看到 webapps 文件夹下的 <code>ROOT</code> 项目，若要看其他的项目，例如 example 项目则在浏览器输入<code>localhost/example</code>。 注意此处是 80 端口，不会显示在地址栏中，如果没有修改 8080 端口号，则要输入 localhost:8080 才能看到效果。</p><h2 id="faq" tabindex="-1">FAQ <a class="header-anchor" href="#faq" aria-label="Permalink to &quot;FAQ&quot;">​</a></h2><h3 id="中文乱码" tabindex="-1">中文乱码 <a class="header-anchor" href="#中文乱码" aria-label="Permalink to &quot;中文乱码&quot;">​</a></h3><p>启动时若控制台中文乱码，在 conf 文件夹下打开 <code>logging.properties</code>，大概在第 51 行将<code>UTF-8</code>改为<code>GBK</code>，重启 tomcat 即可</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki dracula"><code><span class="line"><span style="color:#F8F8F2;">java.util.logging.ConsoleHandler.encoding </span><span style="color:#F1FA8C;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#F1FA8C;">GBK</span></span>
<span class="line"></span></code></pre></div><h3 id="tomcat-启动报内存溢出错误-java-lang-outofmemoryerror-permgen-space-异常" tabindex="-1">Tomcat 启动报内存溢出错误：java.lang.OutOfMemoryError: PermGen space 异常 <a class="header-anchor" href="#tomcat-启动报内存溢出错误-java-lang-outofmemoryerror-permgen-space-异常" aria-label="Permalink to &quot;Tomcat 启动报内存溢出错误：java.lang.OutOfMemoryError: PermGen space 异常&quot;">​</a></h3><p>找到 Tomcat 安装位置 bin 目录下的 <code>catalina.bat</code> 文件，添加如下内容：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki dracula"><code><span class="line"><span style="color:#8BE9FD;">set</span><span style="color:#F8F8F2;"> </span><span style="color:#F1FA8C;">JAVA_OPTS=%JAVA_OPTS%</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">-server</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">-Xmx1024M</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">-Xms512m</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">-XX:MaxNewSize=256m</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">-XX:PermSize=512M</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">-XX:MaxPermSize=512m</span></span>
<span class="line"></span></code></pre></div><p><img src="https://zghimg.oss-cn-beijing.aliyuncs.com/blog/1666418451.png" alt="image"></p>`,25),t=[e];function p(c,r,F,y,i,d){return o(),s("div",null,t)}const m=a(n,[["render",p]]);export{h as __pageData,m as default};
