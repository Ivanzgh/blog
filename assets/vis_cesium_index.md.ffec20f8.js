import{_ as s,c as a,o as n,a as l}from"./app.fe52f538.js";const h=JSON.parse('{"title":"Cesium","description":"","frontmatter":{},"headers":[{"level":2,"title":"osgb \u8F6C 3dtiles","slug":"osgb-\u8F6C-3dtiles"},{"level":3,"title":"\u8BBE\u7F6E rustup \u7684\u4EE3\u7406","slug":"\u8BBE\u7F6E-rustup-\u7684\u4EE3\u7406"},{"level":3,"title":"\u8BBE\u7F6E\u4F9D\u8D56\u6E90\u7684\u4EE3\u7406","slug":"\u8BBE\u7F6E\u4F9D\u8D56\u6E90\u7684\u4EE3\u7406"},{"level":3,"title":"\u4E0B\u8F7D rustup-init.exe \u81EA\u52A8\u5B89\u88C5\u5DE5\u5177\u5E76\u6309\u9ED8\u8BA4\u6267\u884C","slug":"\u4E0B\u8F7D-rustup-init-exe-\u81EA\u52A8\u5B89\u88C5\u5DE5\u5177\u5E76\u6309\u9ED8\u8BA4\u6267\u884C"},{"level":2,"title":"\u5E73\u79FB\u3001\u8D34\u5730\u3001\u65CB\u8F6C","slug":"\u5E73\u79FB\u3001\u8D34\u5730\u3001\u65CB\u8F6C"}],"relativePath":"vis/cesium/index.md","lastUpdated":1660531396000}'),p={name:"vis/cesium/index.md"},e=l(`<h1 id="cesium" tabindex="-1">Cesium <a class="header-anchor" href="#cesium" aria-hidden="true">#</a></h1><h2 id="osgb-\u8F6C-3dtiles" tabindex="-1">osgb \u8F6C 3dtiles <a class="header-anchor" href="#osgb-\u8F6C-3dtiles" aria-hidden="true">#</a></h2><p>\u53C2\u8003\u8D44\u6599\uFF1A</p><ul><li>\u8F6C\u6362\u5DE5\u5177\uFF1A <a href="https://github.com/fanvanzh/3dtiles" target="_blank" rel="noopener noreferrer">https://github.com/fanvanzh/3dtiles</a></li><li>\u9879\u76EE\u7F16\u8BD1\uFF1A<a href="https://github.com/fanvanzh/3dtiles/wiki/How-to-build" target="_blank" rel="noopener noreferrer">https://github.com/fanvanzh/3dtiles/wiki/How-to-build</a></li></ul><p><a href="https://blog.csdn.net/qq_36377037/article/details/86592258" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/qq_36377037/article/details/86592258</a></p><p><code>cmd</code> \u8FDB\u5165 e \u76D8 map \u6587\u4EF6\u5939\u4E0B\uFF0C\u627E\u5230 <code>3dtile.exe</code> \u6240\u5728\u7684\u6587\u4EF6\u5939</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#F8F8F2;">3dtile.exe -f osgb -i E:</span><span style="color:#FF79C6;">\\D</span><span style="color:#F8F8F2;">ata</span><span style="color:#FF79C6;">\\\u503E</span><span style="color:#F8F8F2;">\u659C\u6444\u5F71</span><span style="color:#FF79C6;">\\h</span><span style="color:#F8F8F2;">gc -o E:</span><span style="color:#FF79C6;">\\D</span><span style="color:#F8F8F2;">ata</span><span style="color:#FF79C6;">\\\u503E</span><span style="color:#F8F8F2;">\u659C\u6444\u5F71</span><span style="color:#FF79C6;">\\h</span><span style="color:#F8F8F2;">gc_test</span></span>
<span class="line"></span></code></pre></div><p>Rust \u793E\u533A\u516C\u5F00\u7684\u7B2C\u4E09\u65B9\u5305\u90FD\u96C6\u4E2D\u5728 <code>crates.io</code> \u7F51\u7AD9\u4E0A\u9762\uFF0C\u4ED6\u4EEC\u7684\u6587\u6863\u88AB\u81EA\u52A8\u53D1\u5E03\u5230 <code>doc.rs</code> \u7F51\u7AD9\u4E0A\uFF0CRust \u63D0\u4F9B\u4E86\u975E\u5E38\u65B9\u4FBF\u7684\u5305\u7BA1\u7406\u5668 cargo\u3002\u4E3A\u4E86\u66F4\u5FEB\u901F\u4E0B\u8F7D\u7B2C\u4E09\u65B9\u5305\uFF0C\u6211\u4EEC\u9700\u8981\u628A <code>crates.io</code> \u6362\u56FD\u5185\u7684\u955C\u50CF\u6E90</p><h3 id="\u8BBE\u7F6E-rustup-\u7684\u4EE3\u7406" tabindex="-1">\u8BBE\u7F6E rustup \u7684\u4EE3\u7406 <a class="header-anchor" href="#\u8BBE\u7F6E-rustup-\u7684\u4EE3\u7406" aria-hidden="true">#</a></h3><p>\u4F7F\u7528\u4E2D\u79D1\u5927\u7684\u955C\u50CF\u6E90\uFF0C<a href="http://mirrors.ustc.edu.cn/" target="_blank" rel="noopener noreferrer">http://mirrors.ustc.edu.cn/</a></p><p>\u8BBE\u7F6E\u7CFB\u7EDF\u73AF\u5883\u53D8\u91CF\uFF1A</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#F8F8F2;">RUSTUP_DIST_SERVER: http://mirrors.ustc.edu.cn/rust-static</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">RUSTUP_UPDATE_ROOT: http://mirrors.ustc.edu.cn/rust-static/rustup</span></span>
<span class="line"></span></code></pre></div><h3 id="\u8BBE\u7F6E\u4F9D\u8D56\u6E90\u7684\u4EE3\u7406" tabindex="-1">\u8BBE\u7F6E\u4F9D\u8D56\u6E90\u7684\u4EE3\u7406 <a class="header-anchor" href="#\u8BBE\u7F6E\u4F9D\u8D56\u6E90\u7684\u4EE3\u7406" aria-hidden="true">#</a></h3><p>\u5728 <code>C:/Users/&lt;\u7528\u6237\u540D&gt;/.cargo</code>\u76EE\u5F55\u4E0B\u65B0\u5EFA\u4E00\u4E2A\u6587\u672C\u6587\u4EF6 <code>config</code>\uFF08\u6CA1\u6709\u540E\u7F00\uFF09</p><p>\u4F7F\u7528\u4E2D\u79D1\u5927\u955C\u50CF\u6E90\uFF0C\u6DFB\u52A0\u5185\u5BB9\u5982\u4E0B\uFF1A</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#F8F8F2;">[source.crates-io]</span></span>
<span class="line"><span style="color:#F8F8F2;">registry = </span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">https://github.com/rust-lang/crates.io-index</span><span style="color:#E9F284;">&quot;</span></span>
<span class="line"><span style="color:#F8F8F2;">replace-with = </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">ustc</span><span style="color:#E9F284;">&#39;</span></span>
<span class="line"><span style="color:#F8F8F2;">[source.ustc]</span></span>
<span class="line"><span style="color:#F8F8F2;">registry = </span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">git://mirrors.ustc.edu.cn/crates.io-index</span><span style="color:#E9F284;">&quot;</span></span>
<span class="line"></span></code></pre></div><p>\u6216\u8005\u4F7F\u7528\u963F\u91CC\u4E91\u955C\u50CF\u6E90\uFF0C\u6DFB\u52A0\u5185\u5BB9\u5982\u4E0B\uFF1A</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#F8F8F2;">[source.crates-io]</span></span>
<span class="line"><span style="color:#F8F8F2;">replace-with = </span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">rustcc</span><span style="color:#E9F284;">&quot;</span></span>
<span class="line"><span style="color:#F8F8F2;">[source.rustcc]</span></span>
<span class="line"><span style="color:#F8F8F2;">registry = </span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">https://code.aliyun.com/rustcc/crates.io-index</span><span style="color:#E9F284;">&quot;</span></span>
<span class="line"></span></code></pre></div><h3 id="\u4E0B\u8F7D-rustup-init-exe-\u81EA\u52A8\u5B89\u88C5\u5DE5\u5177\u5E76\u6309\u9ED8\u8BA4\u6267\u884C" tabindex="-1">\u4E0B\u8F7D rustup-init.exe \u81EA\u52A8\u5B89\u88C5\u5DE5\u5177\u5E76\u6309\u9ED8\u8BA4\u6267\u884C <a class="header-anchor" href="#\u4E0B\u8F7D-rustup-init-exe-\u81EA\u52A8\u5B89\u88C5\u5DE5\u5177\u5E76\u6309\u9ED8\u8BA4\u6267\u884C" aria-hidden="true">#</a></h3><p>\u5730\u5740\uFF1A<a href="https://www.rust-lang.org/zh-CN/tools/install" target="_blank" rel="noopener noreferrer">https://www.rust-lang.org/zh-CN/tools/install</a></p><p>\u53CC\u51FB <code>rustup-init.exe</code> \u540E\u8FD0\u884C\u5B89\u88C5\u5305\uFF0C\u4F1A\u5148\u63D0\u793A\u5B89\u88C5 <code>visual cpp build tools</code>\uFF0C\u9009\u62E9 yes\u3002</p><p>\u63A5\u7740\u5F00\u59CB\u5B89\u88C5 <code>rust</code>\uFF0C\u5305\u542B <code>compiler</code>\u3001<code>rustup</code> \u548C <code>cargo</code>\u3002\u82E5\u65E0\u7279\u6B8A\u9700\u6C42\uFF0C\u9009\u62E9\u9ED8\u8BA4\u5B89\u88C5\uFF0C\u5373\u8F93\u5165 1 \u5373\u53EF</p><h2 id="\u5E73\u79FB\u3001\u8D34\u5730\u3001\u65CB\u8F6C" tabindex="-1">\u5E73\u79FB\u3001\u8D34\u5730\u3001\u65CB\u8F6C <a class="header-anchor" href="#\u5E73\u79FB\u3001\u8D34\u5730\u3001\u65CB\u8F6C" aria-hidden="true">#</a></h2><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#FF79C6;">let</span><span style="color:#F8F8F2;"> primitive </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> viewer.scene.primitives.</span><span style="color:#50FA7B;">add</span><span style="color:#F8F8F2;">(tileset)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6;">const</span><span style="color:#F8F8F2;"> longitude </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">116.2392</span></span>
<span class="line"><span style="color:#FF79C6;">const</span><span style="color:#F8F8F2;"> latitude </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">39.5847</span></span>
<span class="line"><span style="color:#FF79C6;">const</span><span style="color:#F8F8F2;"> height </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#FF79C6;">-</span><span style="color:#BD93F9;">20</span></span>
<span class="line"><span style="color:#F8F8F2;">primitive.readyPromise.</span><span style="color:#50FA7B;">then</span><span style="color:#F8F8F2;">(() </span><span style="color:#FF79C6;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#FF79C6;">let</span><span style="color:#F8F8F2;"> hpr </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#FF79C6;font-weight:bold;">new</span><span style="color:#F8F8F2;"> Cesium.</span><span style="color:#50FA7B;">Matrix3</span><span style="color:#F8F8F2;">()</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#6272A4;">// new Cesium.HeadingPitchRoll(heading, pitch, roll)</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#6272A4;">// heading\u56F4\u7ED5\u8D1Fz\u8F74\u7684\u65CB\u8F6C\u3002pitch\u662F\u56F4\u7ED5\u8D1Fy\u8F74\u7684\u65CB\u8F6C\u3002Roll\u662F\u56F4\u7ED5\u6B63x\u8F74\u7684\u65CB\u8F6C</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#FF79C6;">let</span><span style="color:#F8F8F2;"> hprObj </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#FF79C6;font-weight:bold;">new</span><span style="color:#F8F8F2;"> Cesium.</span><span style="color:#50FA7B;">HeadingPitchRoll</span><span style="color:#F8F8F2;">(</span><span style="color:#BD93F9;">Math</span><span style="color:#F8F8F2;">.</span><span style="color:#BD93F9;">PI</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">Math</span><span style="color:#F8F8F2;">.</span><span style="color:#BD93F9;">PI</span><span style="color:#F8F8F2;">, </span><span style="color:#BD93F9;">Math</span><span style="color:#F8F8F2;">.</span><span style="color:#BD93F9;">PI</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#6272A4;">//  Cesium.Matrix3.fromHeadingPitchRoll \uFF08headingPitchRoll\uFF0Cresult\uFF09</span></span>
<span class="line"><span style="color:#F8F8F2;">  hpr </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> Cesium.Matrix3.</span><span style="color:#50FA7B;">fromHeadingPitchRoll</span><span style="color:#F8F8F2;">(hprObj, hpr)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#6272A4;">// 2\u3001\u5E73\u79FB</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#6272A4;">// 2.3\u50A8\u5B58\u5E73\u79FB\u7684\u7ED3\u679C</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#FF79C6;">let</span><span style="color:#F8F8F2;"> modelMatrix </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> Cesium.Matrix4.</span><span style="color:#50FA7B;">multiplyByTranslation</span><span style="color:#F8F8F2;">(</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;">// 2.1\u4ECE\u4EE5\u5EA6\u4E3A\u5355\u4F4D\u7684\u7ECF\u5EA6\u548C\u7EAC\u5EA6\u503C\u8FD4\u56DECartesian3\u4F4D\u7F6E</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;">// 2.2\u8BA1\u7B974x4\u53D8\u6362\u77E9\u9635</span></span>
<span class="line"><span style="color:#F8F8F2;">    Cesium.Transforms.</span><span style="color:#50FA7B;">eastNorthUpToFixedFrame</span><span style="color:#F8F8F2;">(</span></span>
<span class="line"><span style="color:#F8F8F2;">      Cesium.Cartesian3.</span><span style="color:#50FA7B;">fromDegrees</span><span style="color:#F8F8F2;">(longitude, latitude, height)</span></span>
<span class="line"><span style="color:#F8F8F2;">    ),</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;font-weight:bold;">new</span><span style="color:#F8F8F2;"> Cesium.</span><span style="color:#50FA7B;">Cartesian3</span><span style="color:#F8F8F2;">(),</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;font-weight:bold;">new</span><span style="color:#F8F8F2;"> Cesium.</span><span style="color:#50FA7B;">Matrix4</span><span style="color:#F8F8F2;">()</span></span>
<span class="line"><span style="color:#F8F8F2;">  )</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#6272A4;">/// 3\u3001\u5E94\u7528\u65CB\u8F6C</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#6272A4;">// Cesium.Matrix4.multiplyByMatrix3 \uFF08\u77E9\u9635\uFF0C\u65CB\u8F6C\uFF0C\u7ED3\u679C\uFF09</span></span>
<span class="line"><span style="color:#F8F8F2;">  Cesium.Matrix4.</span><span style="color:#50FA7B;">multiplyByMatrix3</span><span style="color:#F8F8F2;">(modelMatrix, hpr, modelMatrix)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#6272A4;">// \u8D4B\u503C</span></span>
<span class="line"><span style="color:#F8F8F2;">  primitive._root.transform </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> modelMatrix</span></span>
<span class="line"><span style="color:#F8F8F2;">})</span></span>
<span class="line"><span style="color:#F8F8F2;">viewer.</span><span style="color:#50FA7B;">zoomTo</span><span style="color:#F8F8F2;">(tileset)</span></span>
<span class="line"></span></code></pre></div>`,24),o=[e];function t(r,c,F,i,y,d){return n(),a("div",null,o)}var g=s(p,[["render",t]]);export{h as __pageData,g as default};
