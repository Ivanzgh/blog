<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>微信小程序 | CONST</title>
    <meta name="description" content="Blog">
    <link rel="preload stylesheet" href="/blog/assets/style.1aa1a028.css" as="style">
    <script type="module" src="/blog/assets/app.c1c89d39.js"></script>
    <link rel="preload" href="/blog/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
  <link rel="modulepreload" href="/blog/assets/chunks/framework.f14b72c3.js">
  <link rel="modulepreload" href="/blog/assets/chunks/theme.781880c2.js">
  <link rel="modulepreload" href="/blog/assets/miniProgram_wx.md.6977121c.lean.js">
  <link rel="icon" href="/blog/img/logo.png">
  <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-b2cf3e0b><!--[--><!--]--><!--[--><span tabindex="-1" data-v-c8616af1></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-c8616af1> Skip to content </a><!--]--><!----><header class="VPNav" data-v-b2cf3e0b data-v-7e5bc4a5><div class="VPNavBar has-sidebar" data-v-7e5bc4a5 data-v-1d30fa41><div class="container" data-v-1d30fa41><div class="title" data-v-1d30fa41><div class="VPNavBarTitle has-sidebar" data-v-1d30fa41 data-v-f4ef19a3><a class="title" href="/blog/" data-v-f4ef19a3><!--[--><!--]--><!--[--><img class="VPImage logo" src="/blog/img/logo.png" alt data-v-6db2186b><!--]--><!--[-->CONST<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-1d30fa41><div class="curtain" data-v-1d30fa41></div><div class="content-body" data-v-1d30fa41><!--[--><!--]--><div class="VPNavBarSearch search" data-v-1d30fa41 style="--673bc564:&#39;Meta&#39;;"><div id="docsearch"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg class="DocSearch-Search-Icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-1d30fa41 data-v-7f418b0f><span id="main-nav-aria-label" class="visually-hidden" data-v-7f418b0f>Main Navigation</span><!--[--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-7f418b0f data-v-764effdf><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-764effdf><span class="text" data-v-764effdf><!----> 前端 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-764effdf><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-764effdf><div class="VPMenu" data-v-764effdf data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-d2c93bab><a class="VPLink link" href="/blog/fe/js/" data-v-d2c93bab data-v-8f4dc553><!--[-->基础<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-d2c93bab><a class="VPLink link" href="/blog/fe/ts/" data-v-d2c93bab data-v-8f4dc553><!--[-->TypeScript<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-d2c93bab><a class="VPLink link" href="/blog/fe/react/" data-v-d2c93bab data-v-8f4dc553><!--[-->React<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-d2c93bab><a class="VPLink link" href="/blog/fe/vue/" data-v-d2c93bab data-v-8f4dc553><!--[-->Vue<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-d2c93bab><a class="VPLink link" href="/blog/fe/node/" data-v-d2c93bab data-v-8f4dc553><!--[-->Node<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-d2c93bab><a class="VPLink link" href="/blog/automate/npm" data-v-d2c93bab data-v-8f4dc553><!--[-->前端工程化<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-d2c93bab><a class="VPLink link active" href="/blog/miniProgram/wx" data-v-d2c93bab data-v-8f4dc553><!--[-->小程序<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-d2c93bab><a class="VPLink link" href="/blog/tools/plugin" data-v-d2c93bab data-v-8f4dc553><!--[-->工具<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-7f418b0f data-v-764effdf><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-764effdf><span class="text" data-v-764effdf><!----> 后端 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-764effdf><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-764effdf><div class="VPMenu" data-v-764effdf data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-d2c93bab><a class="VPLink link" href="/blog/be/docker" data-v-d2c93bab data-v-8f4dc553><!--[-->Docker<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-d2c93bab><a class="VPLink link" href="/blog/be/nginx" data-v-d2c93bab data-v-8f4dc553><!--[-->Nginx<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-d2c93bab><a class="VPLink link" href="/blog/be/mysql" data-v-d2c93bab data-v-8f4dc553><!--[-->MySQL<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-d2c93bab><a class="VPLink link" href="/blog/be/tomcat" data-v-d2c93bab data-v-8f4dc553><!--[-->Tomcat<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-d2c93bab><a class="VPLink link" href="/blog/be/elasticsearch" data-v-d2c93bab data-v-8f4dc553><!--[-->ElasticSearch<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-7f418b0f data-v-764effdf><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-764effdf><span class="text" data-v-764effdf><!----> 可视化 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-764effdf><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-764effdf><div class="VPMenu" data-v-764effdf data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-d2c93bab><a class="VPLink link" href="/blog/vis/gis/" data-v-d2c93bab data-v-8f4dc553><!--[-->GIS<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-d2c93bab><a class="VPLink link" href="/blog/vis/three/" data-v-d2c93bab data-v-8f4dc553><!--[-->Three<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-d2c93bab><a class="VPLink link" href="/blog/media/" data-v-d2c93bab data-v-8f4dc553><!--[-->流媒体<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-7f418b0f data-v-764effdf><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-764effdf><span class="text" data-v-764effdf><!----> 计算机基础 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-764effdf><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-764effdf><div class="VPMenu" data-v-764effdf data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-d2c93bab><a class="VPLink link" href="/blog/base/network/" data-v-d2c93bab data-v-8f4dc553><!--[-->计算机网络<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-d2c93bab><a class="VPLink link" href="/blog/base/data-structure/" data-v-d2c93bab data-v-8f4dc553><!--[-->数据结构<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-d2c93bab><a class="VPLink link" href="/blog/base/design-pattern/" data-v-d2c93bab data-v-8f4dc553><!--[-->设计模式<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-d2c93bab><a class="VPLink link" href="/blog/base/algorithm/" data-v-d2c93bab data-v-8f4dc553><!--[-->算法<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-d2c93bab><a class="VPLink link" href="/blog/base/os/" data-v-d2c93bab data-v-8f4dc553><!--[-->操作系统<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-d2c93bab><a class="VPLink link" href="/blog/base/computer-organization/" data-v-d2c93bab data-v-8f4dc553><!--[-->计算机组成原理<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-1d30fa41 data-v-f6a63727><label title="toggle dark mode" data-v-f6a63727 data-v-a9c8afb8><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-checked="false" data-v-a9c8afb8 data-v-f3c41672><span class="check" data-v-f3c41672><span class="icon" data-v-f3c41672><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-a9c8afb8><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-a9c8afb8><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></label></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-1d30fa41 data-v-0394ad82 data-v-f6988cfb><!--[--><a class="VPSocialLink" href="https://github.com/Ivanzgh" aria-label="github" target="_blank" rel="noopener" data-v-f6988cfb data-v-c530cc0a><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-1d30fa41 data-v-40855f84 data-v-764effdf><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-764effdf><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-764effdf><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-764effdf><div class="VPMenu" data-v-764effdf data-v-e7ea1737><!----><!--[--><!--[--><!----><div class="group" data-v-40855f84><div class="item appearance" data-v-40855f84><p class="label" data-v-40855f84>Appearance</p><div class="appearance-action" data-v-40855f84><label title="toggle dark mode" data-v-40855f84 data-v-a9c8afb8><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-checked="false" data-v-a9c8afb8 data-v-f3c41672><span class="check" data-v-f3c41672><span class="icon" data-v-f3c41672><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-a9c8afb8><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-a9c8afb8><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></label></div></div></div><div class="group" data-v-40855f84><div class="item social-links" data-v-40855f84><div class="VPSocialLinks social-links-list" data-v-40855f84 data-v-f6988cfb><!--[--><a class="VPSocialLink" href="https://github.com/Ivanzgh" aria-label="github" target="_blank" rel="noopener" data-v-f6988cfb data-v-c530cc0a><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-1d30fa41 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav" data-v-b2cf3e0b data-v-f5a2ca58><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-f5a2ca58><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-f5a2ca58><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-f5a2ca58>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-f5a2ca58 data-v-079b16a8><button data-v-079b16a8>Return to top</button><!----></div></div><aside class="VPSidebar" data-v-b2cf3e0b data-v-139a1f1d><div class="curtain" data-v-139a1f1d></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-139a1f1d><span class="visually-hidden" id="sidebar-aria-label" data-v-139a1f1d> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-139a1f1d><section class="VPSidebarItem level-0 collapsible has-active" data-v-139a1f1d data-v-c4656e6d><div class="item" role="button" tabindex="0" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><h2 class="text" data-v-c4656e6d>小程序</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c4656e6d><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-c4656e6d><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-c4656e6d><!--[--><div class="VPSidebarItem level-1 is-link is-active has-active" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/blog/miniProgram/wx" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>微信小程序</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/blog/miniProgram/taro" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>Taro</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/blog/miniProgram/uniapp" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>uniapp</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-b2cf3e0b data-v-a494bd1d><div class="VPDoc has-sidebar has-aside" data-v-a494bd1d data-v-c4b0d3cf><!--[--><!--]--><div class="container" data-v-c4b0d3cf><div class="aside" data-v-c4b0d3cf><div class="aside-curtain" data-v-c4b0d3cf></div><div class="aside-container" data-v-c4b0d3cf><div class="aside-content" data-v-c4b0d3cf><div class="VPDocAside" data-v-c4b0d3cf data-v-3f215769><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-3f215769 data-v-ff0f39c8><div class="content" data-v-ff0f39c8><div class="outline-marker" data-v-ff0f39c8></div><div class="outline-title" data-v-ff0f39c8>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-ff0f39c8><span class="visually-hidden" id="doc-outline-aria-label" data-v-ff0f39c8> Table of Contents for current page </span><ul class="root" data-v-ff0f39c8 data-v-8f12e865><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-c4b0d3cf><div class="content-container" data-v-c4b0d3cf><!--[--><!--]--><!----><main class="main" data-v-c4b0d3cf><div style="position:relative;" class="vp-doc _blog_miniProgram_wx" data-v-c4b0d3cf><div><h1 id="微信小程序" tabindex="-1">微信小程序 <a class="header-anchor" href="#微信小程序" aria-label="Permalink to &quot;微信小程序&quot;">​</a></h1><h2 id="更改数据" tabindex="-1">更改数据 <a class="header-anchor" href="#更改数据" aria-label="Permalink to &quot;更改数据&quot;">​</a></h2><p>通过<code>this.setData</code>更改</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki dracula"><code><span class="line"><span style="color:#50FA7B;">Page</span><span style="color:#F8F8F2;">({</span></span>
<span class="line"><span style="color:#F8F8F2;">  data</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">    detailData</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> { a</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;"> }</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#50FA7B;">updateData</span><span style="color:#F8F8F2;">(){</span></span>
<span class="line"><span style="color:#F8F8F2;"> </span><span style="color:#FF79C6;">const</span><span style="color:#F8F8F2;"> newData </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> { a</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">2</span><span style="color:#F8F8F2;"> }</span></span>
<span class="line"><span style="color:#F8F8F2;"> </span><span style="color:#6272A4;">// 整体替换</span></span>
<span class="line"><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;font-style:italic;">this</span><span style="color:#F8F8F2;">.</span><span style="color:#50FA7B;">setData</span><span style="color:#F8F8F2;">({ detailData</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> newData })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;"> </span><span style="color:#6272A4;">// 如果只想更改对象里面的属性</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#BD93F9;font-style:italic;">this</span><span style="color:#F8F8F2;">.</span><span style="color:#50FA7B;">setData</span><span style="color:#F8F8F2;">({ [</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">detailData.a</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">]</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">2</span><span style="color:#F8F8F2;"> })</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="路由" tabindex="-1">路由 <a class="header-anchor" href="#路由" aria-label="Permalink to &quot;路由&quot;">​</a></h2><h3 id="wx-navigateto" tabindex="-1">wx.navigateTo <a class="header-anchor" href="#wx-navigateto" aria-label="Permalink to &quot;wx.navigateTo&quot;">​</a></h3><p>在 wxml 中使用：<code>&lt;navigator url=&quot;/pages/list/detail?id=1&quot;&gt;点击跳转去详情页&lt;/navigator&gt;</code></p><p>在 js 中使用：<code>wx.navigateTo({ url: &#39;/pages/list/detail&#39; })</code></p><p>接收参数：在生命周期函数 onLoad 中监听页面加载</p><p>路由传参不能直接传递对象，需要转为 json 字符串，<code>JSON.stringfy()</code>、<code>JSON.parse()</code></p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki dracula"><code><span class="line"><span style="color:#50FA7B;">onLoad</span><span style="color:#F8F8F2;">(options) {</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#BD93F9;font-style:italic;">this</span><span style="color:#F8F8F2;">.</span><span style="color:#50FA7B;">setData</span><span style="color:#F8F8F2;">({ routerParams</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> options.id })</span></span>
<span class="line"><span style="color:#F8F8F2;">},</span></span>
<span class="line"></span></code></pre></div><h3 id="wx-switchtab" tabindex="-1">wx.switchTab <a class="header-anchor" href="#wx-switchtab" aria-label="Permalink to &quot;wx.switchTab&quot;">​</a></h3><p>跳转到 tab 页面：<code>wx.switchTab({ url: &#39;/pages/index/index&#39; });</code></p><p>1、如何传递参数？</p><p>可以在跳转之前将参数存储到全局对象：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki dracula"><code><span class="line"><span style="color:#FF79C6;">const</span><span style="color:#F8F8F2;"> app </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">getApp</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#50FA7B;">Page</span><span style="color:#F8F8F2;">({</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#50FA7B;">goToLink</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F8F8F2;">    app.globalData.searchValue </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">123</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F8F8F2;">    wx.</span><span style="color:#50FA7B;">switchTab</span><span style="color:#F8F8F2;">({ url</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">/pages/index/index</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;"> });</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">});</span></span>
<span class="line"></span></code></pre></div><p>在要使用的页面获取数据：<code>app.globalData.searchValue</code></p><h2 id="图片上传" tabindex="-1">图片上传 <a class="header-anchor" href="#图片上传" aria-label="Permalink to &quot;图片上传&quot;">​</a></h2><h3 id="使用原生方法上传" tabindex="-1">使用原生方法上传 <a class="header-anchor" href="#使用原生方法上传" aria-label="Permalink to &quot;使用原生方法上传&quot;">​</a></h3><p>使用<code>wx.chooseMedia()</code>选取图片，默认支持从相册选择和拍照上传，下方是单独区分的。再使用<code>wx.uploadFile()</code>上传到服务器， 但是该方法不支持多图片上传，可以封装成 promise 并行上传图片</p><p>upload.wxml</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki dracula"><code><span class="line"><span style="color:#F8F8F2;">&lt;</span><span style="color:#FF5555;font-style:italic;text-decoration:underline;">view</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">  &lt;</span><span style="color:#FF5555;font-style:italic;text-decoration:underline;">view</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">    &lt;</span><span style="color:#FF79C6;">van-button</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">type</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">primary</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">bindtap</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">photoAlbum</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">&gt;相册上传&lt;/</span><span style="color:#FF79C6;">van-button</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">    &lt;</span><span style="color:#FF79C6;">van-button</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">type</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">info</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">bindtap</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">photograph</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">&gt;拍照上传&lt;/</span><span style="color:#FF79C6;">van-button</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">  &lt;/</span><span style="color:#FF5555;font-style:italic;text-decoration:underline;">view</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">  &lt;</span><span style="color:#FF5555;font-style:italic;text-decoration:underline;">view</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">    &lt;</span><span style="color:#FF5555;font-style:italic;text-decoration:underline;">view</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">class</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">num</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">      &lt;</span><span style="color:#FF5555;font-style:italic;text-decoration:underline;">text</span><span style="color:#F8F8F2;">&gt;图片上传&lt;/</span><span style="color:#FF5555;font-style:italic;text-decoration:underline;">text</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">      &lt;</span><span style="color:#FF5555;font-style:italic;text-decoration:underline;">text</span><span style="color:#F8F8F2;">&gt;{{imageList.length}}/9&lt;/</span><span style="color:#FF5555;font-style:italic;text-decoration:underline;">text</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">    &lt;/</span><span style="color:#FF5555;font-style:italic;text-decoration:underline;">view</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">    &lt;</span><span style="color:#FF5555;font-style:italic;text-decoration:underline;">view</span><span style="color:#F8F8F2;">&gt;imageList: {{imageList}}&lt;/</span><span style="color:#FF5555;font-style:italic;text-decoration:underline;">view</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">    &lt;</span><span style="color:#FF5555;font-style:italic;text-decoration:underline;">block</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">wx:for</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">{{imageList}}</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">wx:key</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">*this</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">      &lt;</span><span style="color:#FF5555;font-style:italic;text-decoration:underline;">view</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">class</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">q-image-wrap</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">        &lt;</span><span style="color:#FF5555;font-style:italic;text-decoration:underline;">image</span></span>
<span class="line"><span style="color:#F8F8F2;">          </span><span style="color:#50FA7B;font-style:italic;">class</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">q-image</span><span style="color:#E9F284;">&quot;</span></span>
<span class="line"><span style="color:#F8F8F2;">          </span><span style="color:#50FA7B;font-style:italic;">style</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">width: 300rpx; height: 300rpx</span><span style="color:#E9F284;">&quot;</span></span>
<span class="line"><span style="color:#F8F8F2;">          </span><span style="color:#50FA7B;font-style:italic;">src</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">{{item}}</span><span style="color:#E9F284;">&quot;</span></span>
<span class="line"><span style="color:#F8F8F2;">          </span><span style="color:#50FA7B;font-style:italic;">mode</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">aspectFill</span><span style="color:#E9F284;">&quot;</span></span>
<span class="line"><span style="color:#F8F8F2;">          </span><span style="color:#50FA7B;font-style:italic;">data-idx</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">{{index}}</span><span style="color:#E9F284;">&quot;</span></span>
<span class="line"><span style="color:#F8F8F2;">          </span><span style="color:#50FA7B;font-style:italic;">bindtap</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">handleImagePreview</span><span style="color:#E9F284;">&quot;</span></span>
<span class="line"><span style="color:#F8F8F2;">        &gt;&lt;/</span><span style="color:#FF5555;font-style:italic;text-decoration:underline;">image</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">        &lt;</span><span style="color:#FF5555;font-style:italic;text-decoration:underline;">view</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">data-idx</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">{{index}}</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">bindtap</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">removeImage</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">&gt;删除&lt;/</span><span style="color:#FF5555;font-style:italic;text-decoration:underline;">view</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">      &lt;/</span><span style="color:#FF5555;font-style:italic;text-decoration:underline;">view</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">    &lt;/</span><span style="color:#FF5555;font-style:italic;text-decoration:underline;">block</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">  &lt;/</span><span style="color:#FF5555;font-style:italic;text-decoration:underline;">view</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">  &lt;</span><span style="color:#FF79C6;">van-button</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">type</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">primary</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">block</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">color</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">#409eff</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">bindtap</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">submitForm</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">&gt;保存&lt;/</span><span style="color:#FF79C6;">van-button</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">&lt;/</span><span style="color:#FF5555;font-style:italic;text-decoration:underline;">view</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>upload.js</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki dracula"><code><span class="line"><span style="color:#50FA7B;">Page</span><span style="color:#F8F8F2;">({</span></span>
<span class="line"><span style="color:#F8F8F2;">  data</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">    imageList</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> []</span></span>
<span class="line"><span style="color:#F8F8F2;">  },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#6272A4;">// 相册上传</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#50FA7B;">photoAlbum</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">let</span><span style="color:#F8F8F2;"> that </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;font-style:italic;">this</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">const</span><span style="color:#F8F8F2;"> imgNum </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;font-style:italic;">this</span><span style="color:#F8F8F2;">.data.imageList.length;</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">if</span><span style="color:#F8F8F2;"> (imgNum </span><span style="color:#FF79C6;">&gt;=</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">9</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">      wx.</span><span style="color:#50FA7B;">showToast</span><span style="color:#F8F8F2;">({ title</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">最多上传9张图片</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, icon</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">loading</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, duration</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">2000</span><span style="color:#F8F8F2;"> });</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#FF79C6;">return</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">false</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F8F8F2;">    } </span><span style="color:#FF79C6;">else</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">      imgNum </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">9</span><span style="color:#F8F8F2;"> </span><span style="color:#FF79C6;">-</span><span style="color:#F8F8F2;"> imgNum;</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">    wx.</span><span style="color:#50FA7B;">chooseMedia</span><span style="color:#F8F8F2;">({</span></span>
<span class="line"><span style="color:#F8F8F2;">      count</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> imgNum,</span></span>
<span class="line"><span style="color:#F8F8F2;">      mediaType</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> [</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">image</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">],</span></span>
<span class="line"><span style="color:#F8F8F2;">      sourceType</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> [</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">album</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">],</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#50FA7B;">success</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">res</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#FF79C6;">const</span><span style="color:#F8F8F2;"> arr </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> [];</span></span>
<span class="line"><span style="color:#F8F8F2;">        res.tempFiles.</span><span style="color:#50FA7B;">forEach</span><span style="color:#F8F8F2;">((</span><span style="color:#FFB86C;font-style:italic;">e</span><span style="color:#F8F8F2;">) </span><span style="color:#FF79C6;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">          arr.</span><span style="color:#50FA7B;">push</span><span style="color:#F8F8F2;">(e.tempFilePath);</span></span>
<span class="line"><span style="color:#F8F8F2;">        });</span></span>
<span class="line"><span style="color:#F8F8F2;">        that.</span><span style="color:#50FA7B;">setData</span><span style="color:#F8F8F2;">({ imageList</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> that.data.imageList.</span><span style="color:#50FA7B;">concat</span><span style="color:#F8F8F2;">(arr) });</span></span>
<span class="line"><span style="color:#F8F8F2;">      },</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#50FA7B;">fail</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">res</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">        console.</span><span style="color:#50FA7B;">log</span><span style="color:#F8F8F2;">(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">接口调用失败的回调函数</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, res);</span></span>
<span class="line"><span style="color:#F8F8F2;">      }</span></span>
<span class="line"><span style="color:#F8F8F2;">    });</span></span>
<span class="line"><span style="color:#F8F8F2;">  },</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#6272A4;">// 拍照上传</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#50FA7B;">photograph</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">let</span><span style="color:#F8F8F2;"> that </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;font-style:italic;">this</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">const</span><span style="color:#F8F8F2;"> imgNum </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;font-style:italic;">this</span><span style="color:#F8F8F2;">.data.imageList.length;</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">if</span><span style="color:#F8F8F2;"> (imgNum </span><span style="color:#FF79C6;">&gt;=</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">9</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">      wx.</span><span style="color:#50FA7B;">showToast</span><span style="color:#F8F8F2;">({ title</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">最多上传9张图片</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, icon</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">loading</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, duration</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">2000</span><span style="color:#F8F8F2;"> });</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#FF79C6;">return</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">false</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F8F8F2;">    } </span><span style="color:#FF79C6;">else</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">      imgNum </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">9</span><span style="color:#F8F8F2;"> </span><span style="color:#FF79C6;">-</span><span style="color:#F8F8F2;"> imgNum;</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">    wx.</span><span style="color:#50FA7B;">chooseMedia</span><span style="color:#F8F8F2;">({</span></span>
<span class="line"><span style="color:#F8F8F2;">      count</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> imgNum,</span></span>
<span class="line"><span style="color:#F8F8F2;">      mediaType</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> [</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">image</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">],</span></span>
<span class="line"><span style="color:#F8F8F2;">      sourceType</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> [</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">camera</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">],</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#50FA7B;">success</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">res</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#FF79C6;">const</span><span style="color:#F8F8F2;"> arr </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> [];</span></span>
<span class="line"><span style="color:#F8F8F2;">        res.tempFiles.</span><span style="color:#50FA7B;">forEach</span><span style="color:#F8F8F2;">((</span><span style="color:#FFB86C;font-style:italic;">e</span><span style="color:#F8F8F2;">) </span><span style="color:#FF79C6;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">          arr.</span><span style="color:#50FA7B;">push</span><span style="color:#F8F8F2;">(e.tempFilePath);</span></span>
<span class="line"><span style="color:#F8F8F2;">        });</span></span>
<span class="line"><span style="color:#F8F8F2;">        that.</span><span style="color:#50FA7B;">setData</span><span style="color:#F8F8F2;">({</span></span>
<span class="line"><span style="color:#F8F8F2;">          imageList</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> that.data.imageList.</span><span style="color:#50FA7B;">concat</span><span style="color:#F8F8F2;">(arr)</span></span>
<span class="line"><span style="color:#F8F8F2;">        });</span></span>
<span class="line"><span style="color:#F8F8F2;">      },</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#50FA7B;">fail</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">res</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">        console.</span><span style="color:#50FA7B;">log</span><span style="color:#F8F8F2;">(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">接口调用失败的回调函数</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, res);</span></span>
<span class="line"><span style="color:#F8F8F2;">      }</span></span>
<span class="line"><span style="color:#F8F8F2;">    });</span></span>
<span class="line"><span style="color:#F8F8F2;">  },</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#6272A4;">// 图片预览</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#50FA7B;">handleImagePreview</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">e</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">const</span><span style="color:#F8F8F2;"> index </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> e.currentTarget.dataset.idx;</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">const</span><span style="color:#F8F8F2;"> images </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;font-style:italic;">this</span><span style="color:#F8F8F2;">.data.imageList;</span></span>
<span class="line"><span style="color:#F8F8F2;">    wx.</span><span style="color:#50FA7B;">previewImage</span><span style="color:#F8F8F2;">({</span></span>
<span class="line"><span style="color:#F8F8F2;">      current</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> images[index], </span><span style="color:#6272A4;">//当前预览的图片</span></span>
<span class="line"><span style="color:#F8F8F2;">      urls</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> images </span><span style="color:#6272A4;">//所有要预览的图片</span></span>
<span class="line"><span style="color:#F8F8F2;">    });</span></span>
<span class="line"><span style="color:#F8F8F2;">  },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#6272A4;">// 删除图片</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#50FA7B;">removeImage</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">e</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">const</span><span style="color:#F8F8F2;"> that </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;font-style:italic;">this</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">const</span><span style="color:#F8F8F2;"> imgList </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;font-style:italic;">this</span><span style="color:#F8F8F2;">.data.imageList;</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">const</span><span style="color:#F8F8F2;"> index </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> e.currentTarget.dataset.idx;</span></span>
<span class="line"><span style="color:#F8F8F2;">    wx.</span><span style="color:#50FA7B;">showModal</span><span style="color:#F8F8F2;">({</span></span>
<span class="line"><span style="color:#F8F8F2;">      title</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">提示</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">      content</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">确定要删除此图片吗？</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#50FA7B;">success</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">res</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#FF79C6;">if</span><span style="color:#F8F8F2;"> (res.confirm) {</span></span>
<span class="line"><span style="color:#F8F8F2;">          imgList.</span><span style="color:#50FA7B;">splice</span><span style="color:#F8F8F2;">(index, </span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">        } </span><span style="color:#FF79C6;">else</span><span style="color:#F8F8F2;"> </span><span style="color:#FF79C6;">if</span><span style="color:#F8F8F2;"> (res.cancel) {</span></span>
<span class="line"><span style="color:#F8F8F2;">          </span><span style="color:#FF79C6;">return</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">false</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F8F8F2;">        }</span></span>
<span class="line"><span style="color:#F8F8F2;">        that.</span><span style="color:#50FA7B;">setData</span><span style="color:#F8F8F2;">({ imageList</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> imgList });</span></span>
<span class="line"><span style="color:#F8F8F2;">      }</span></span>
<span class="line"><span style="color:#F8F8F2;">    });</span></span>
<span class="line"><span style="color:#F8F8F2;">  },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#6272A4;">// wx.uploadFile() 不支持多图片上传。可以封装成 promise</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#50FA7B;">wxUploadFile</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">filePath</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">let</span><span style="color:#F8F8F2;"> that </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;font-style:italic;">this</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">return</span><span style="color:#F8F8F2;"> </span><span style="color:#FF79C6;font-weight:bold;">new</span><span style="color:#F8F8F2;"> </span><span style="color:#8BE9FD;font-style:italic;">Promise</span><span style="color:#F8F8F2;">((</span><span style="color:#FFB86C;font-style:italic;">resolve</span><span style="color:#F8F8F2;">, </span><span style="color:#FFB86C;font-style:italic;">reject</span><span style="color:#F8F8F2;">) </span><span style="color:#FF79C6;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">      wx.</span><span style="color:#50FA7B;">uploadFile</span><span style="color:#F8F8F2;">({</span></span>
<span class="line"><span style="color:#F8F8F2;">        url</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#F1FA8C;">`</span><span style="color:#FF79C6;">${</span><span style="color:#F8F8F2;">config.url.fileServer</span><span style="color:#FF79C6;">}</span><span style="color:#F1FA8C;">/upload`</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">        filePath,</span></span>
<span class="line"><span style="color:#F8F8F2;">        name</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">file</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">        formData</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> { user</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">test</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;"> }, </span><span style="color:#6272A4;">// 要传递的参数</span></span>
<span class="line"><span style="color:#F8F8F2;">        method</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">POST</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">        header</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> { </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">Content-Type</span><span style="color:#E9F284;">&#39;</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">multipart/form-data</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;"> },</span></span>
<span class="line"><span style="color:#F8F8F2;">        success</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> resolve,</span></span>
<span class="line"><span style="color:#F8F8F2;">        fail</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> reject</span></span>
<span class="line"><span style="color:#F8F8F2;">      });</span></span>
<span class="line"><span style="color:#F8F8F2;">    });</span></span>
<span class="line"><span style="color:#F8F8F2;">  },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#6272A4;">// 保存提交</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#50FA7B;">submitForm</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">e</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">const</span><span style="color:#F8F8F2;"> arr </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> [];</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;">//将选择的图片组成一个Promise数组，准备进行并行上传</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">for</span><span style="color:#F8F8F2;"> (</span><span style="color:#FF79C6;">let</span><span style="color:#F8F8F2;"> path </span><span style="color:#FF79C6;">of</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;font-style:italic;">this</span><span style="color:#F8F8F2;">.data.imageList) {</span></span>
<span class="line"><span style="color:#F8F8F2;">      arr.</span><span style="color:#50FA7B;">push</span><span style="color:#F8F8F2;">(</span><span style="color:#BD93F9;font-style:italic;">this</span><span style="color:#F8F8F2;">.</span><span style="color:#50FA7B;">wxUploadFile</span><span style="color:#F8F8F2;">(path));</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">    wx.</span><span style="color:#50FA7B;">showLoading</span><span style="color:#F8F8F2;">({ title</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">正在上传...</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, mask</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">true</span><span style="color:#F8F8F2;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;">// 开始并行上传图片</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#8BE9FD;font-style:italic;">Promise</span><span style="color:#F8F8F2;">.</span><span style="color:#50FA7B;">all</span><span style="color:#F8F8F2;">(arr)</span></span>
<span class="line"><span style="color:#F8F8F2;">      .</span><span style="color:#50FA7B;">then</span><span style="color:#F8F8F2;">((</span><span style="color:#FFB86C;font-style:italic;">res</span><span style="color:#F8F8F2;">) </span><span style="color:#FF79C6;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#6272A4;">// 上传成功，获取这些图片在服务器上的地址，组成一个数组</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#FF79C6;">return</span><span style="color:#F8F8F2;"> res.</span><span style="color:#50FA7B;">map</span><span style="color:#F8F8F2;">((</span><span style="color:#FFB86C;font-style:italic;">item</span><span style="color:#F8F8F2;">) </span><span style="color:#FF79C6;">=&gt;</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">JSON</span><span style="color:#F8F8F2;">.</span><span style="color:#50FA7B;">parse</span><span style="color:#F8F8F2;">(item.data).url);</span></span>
<span class="line"><span style="color:#F8F8F2;">      })</span></span>
<span class="line"><span style="color:#F8F8F2;">      .</span><span style="color:#50FA7B;">catch</span><span style="color:#F8F8F2;">((</span><span style="color:#FFB86C;font-style:italic;">err</span><span style="color:#F8F8F2;">) </span><span style="color:#FF79C6;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">        console.</span><span style="color:#50FA7B;">log</span><span style="color:#F8F8F2;">(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">upload images error:</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, err);</span></span>
<span class="line"><span style="color:#F8F8F2;">      })</span></span>
<span class="line"><span style="color:#F8F8F2;">      .</span><span style="color:#50FA7B;">then</span><span style="color:#F8F8F2;">((</span><span style="color:#FFB86C;font-style:italic;">urls</span><span style="color:#F8F8F2;">) </span><span style="color:#FF79C6;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#6272A4;">// 调用保存图片的后端接口</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#6272A4;">// return saveImages({</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#6272A4;">//   projectID: 1,</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#6272A4;">//   images: urls</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#6272A4;">// })</span></span>
<span class="line"><span style="color:#F8F8F2;">      })</span></span>
<span class="line"><span style="color:#F8F8F2;">      .</span><span style="color:#50FA7B;">then</span><span style="color:#F8F8F2;">((</span><span style="color:#FFB86C;font-style:italic;">res</span><span style="color:#F8F8F2;">) </span><span style="color:#FF79C6;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#6272A4;">// 保存图片成功，返回上一页</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#FF79C6;">const</span><span style="color:#F8F8F2;"> pages </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">getCurrentPages</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#FF79C6;">const</span><span style="color:#F8F8F2;"> currPage </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> pages[pages.length </span><span style="color:#FF79C6;">-</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">];</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#FF79C6;">const</span><span style="color:#F8F8F2;"> prevPage </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> pages[pages.length </span><span style="color:#FF79C6;">-</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">2</span><span style="color:#F8F8F2;">];</span></span>
<span class="line"><span style="color:#F8F8F2;">        wx.</span><span style="color:#50FA7B;">navigateBack</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">      })</span></span>
<span class="line"><span style="color:#F8F8F2;">      .</span><span style="color:#50FA7B;">catch</span><span style="color:#F8F8F2;">((</span><span style="color:#FFB86C;font-style:italic;">err</span><span style="color:#F8F8F2;">) </span><span style="color:#FF79C6;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">        console.</span><span style="color:#50FA7B;">log</span><span style="color:#F8F8F2;">(err);</span></span>
<span class="line"><span style="color:#F8F8F2;">      })</span></span>
<span class="line"><span style="color:#F8F8F2;">      .</span><span style="color:#50FA7B;">then</span><span style="color:#F8F8F2;">(() </span><span style="color:#FF79C6;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">        wx.</span><span style="color:#50FA7B;">hideLoading</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">      });</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">});</span></span>
<span class="line"></span></code></pre></div><h3 id="使用-vant-小程序组件库" tabindex="-1">使用 vant 小程序组件库 <a class="header-anchor" href="#使用-vant-小程序组件库" aria-label="Permalink to &quot;使用 vant 小程序组件库&quot;">​</a></h3><p><a href="https://vant-contrib.gitee.io/vant-weapp/#/home" target="_blank" rel="noreferrer">vant 地址</a></p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki dracula"><code><span class="line"><span style="color:#F8F8F2;">&lt;</span><span style="color:#FF79C6;">van-uploader</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#50FA7B;font-style:italic;">file-list</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">{{ fileList }}</span><span style="color:#E9F284;">&quot;</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#50FA7B;font-style:italic;">use-before-read</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#50FA7B;font-style:italic;">bind:before-read</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">beforeRead</span><span style="color:#E9F284;">&quot;</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#50FA7B;font-style:italic;">bind:after-read</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">afterRead</span><span style="color:#E9F284;">&quot;</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#50FA7B;font-style:italic;">deletable</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">{{ true }}</span><span style="color:#E9F284;">&quot;</span></span>
<span class="line"><span style="color:#F8F8F2;">/&gt;</span></span>
<span class="line"></span></code></pre></div><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki dracula"><code><span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#50FA7B;">beforeRead</span><span style="color:#F8F8F2;">(event) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">const</span><span style="color:#F8F8F2;"> { file, callback } </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> event.detail</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#50FA7B;">callback</span><span style="color:#F8F8F2;">(file.type </span><span style="color:#FF79C6;">===</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">image</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">  },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#50FA7B;">afterRead</span><span style="color:#F8F8F2;">(event) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">const</span><span style="color:#F8F8F2;"> that </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;font-style:italic;">this</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">const</span><span style="color:#F8F8F2;"> { file } </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> event.detail</span></span>
<span class="line"><span style="color:#F8F8F2;">    wx.</span><span style="color:#50FA7B;">uploadFile</span><span style="color:#F8F8F2;">({</span></span>
<span class="line"><span style="color:#F8F8F2;">      url</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#F1FA8C;">`</span><span style="color:#FF79C6;">${</span><span style="color:#F8F8F2;">config.url.apiServer</span><span style="color:#FF79C6;">}</span><span style="color:#F1FA8C;">/manage/file/upload`</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">      filePath</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> file.url,</span></span>
<span class="line"><span style="color:#F8F8F2;">      name</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">file</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">      formData</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> { businessId</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> that.data.guid },</span></span>
<span class="line"><span style="color:#F8F8F2;">      header</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> { </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">Content-Type</span><span style="color:#E9F284;">&#39;</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">multipart/form-data</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;"> },</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#50FA7B;">success</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">res</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#FF79C6;">const</span><span style="color:#F8F8F2;"> data </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">JSON</span><span style="color:#F8F8F2;">.</span><span style="color:#50FA7B;">parse</span><span style="color:#F8F8F2;">(res.data)</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#FF79C6;">const</span><span style="color:#F8F8F2;"> kfc </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> result.data.data</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#FF79C6;">const</span><span style="color:#F8F8F2;"> { fileList </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> [] } </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> that.data</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#FF79C6;">let</span><span style="color:#F8F8F2;"> url </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> kfc.serverUrl</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#FF79C6;">let</span><span style="color:#F8F8F2;"> files </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> kfc.fileList</span></span>
<span class="line"><span style="color:#F8F8F2;">        files.</span><span style="color:#50FA7B;">forEach</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">f</span><span style="color:#F8F8F2;"> </span><span style="color:#FF79C6;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">          fileList.</span><span style="color:#50FA7B;">push</span><span style="color:#F8F8F2;">({ </span><span style="color:#FF79C6;">...</span><span style="color:#F8F8F2;">file, url</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> url </span><span style="color:#FF79C6;">+</span><span style="color:#F8F8F2;"> f.fileUrl })</span></span>
<span class="line"><span style="color:#F8F8F2;">        })</span></span>
<span class="line"><span style="color:#F8F8F2;">        that.</span><span style="color:#50FA7B;">setData</span><span style="color:#F8F8F2;">({ fileList })</span></span>
<span class="line"><span style="color:#F8F8F2;">      },</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#50FA7B;">fail</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">res</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">        console.</span><span style="color:#50FA7B;">log</span><span style="color:#F8F8F2;">(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">error</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, res)</span></span>
<span class="line"><span style="color:#F8F8F2;">      }</span></span>
<span class="line"><span style="color:#F8F8F2;">    })</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span></code></pre></div><h2 id="文件下载" tabindex="-1">文件下载 <a class="header-anchor" href="#文件下载" aria-label="Permalink to &quot;文件下载&quot;">​</a></h2><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki dracula"><code><span class="line"><span style="color:#F8F8F2;">&lt;</span><span style="color:#FF5555;font-style:italic;text-decoration:underline;">view</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">style</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">color: #1990FF</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">wx:for</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">{{fileList}}</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">wx:key</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">fileUUid</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">data-url</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">{{item.fileUrl}}</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">bindtap</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">downloadFile</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">  {{item.name}}</span></span>
<span class="line"><span style="color:#F8F8F2;">&lt;/</span><span style="color:#FF5555;font-style:italic;text-decoration:underline;">view</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"></span></code></pre></div><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki dracula"><code><span class="line"><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">downloadFile</span><span style="color:#F8F8F2;">(e) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">const</span><span style="color:#F8F8F2;"> url </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;font-style:italic;">this</span><span style="color:#F8F8F2;">.data.fileServer </span><span style="color:#FF79C6;">+</span><span style="color:#F8F8F2;"> e.currentTarget.dataset.url</span></span>
<span class="line"><span style="color:#F8F8F2;">    wx.</span><span style="color:#50FA7B;">downloadFile</span><span style="color:#F8F8F2;">({</span></span>
<span class="line"><span style="color:#F8F8F2;">      url</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> url,</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#50FA7B;">success</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">res</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#FF79C6;">if</span><span style="color:#F8F8F2;"> (res.statusCode </span><span style="color:#FF79C6;">===</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">200</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">          wx.</span><span style="color:#50FA7B;">openDocument</span><span style="color:#F8F8F2;">({</span></span>
<span class="line"><span style="color:#F8F8F2;">            filePath</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> res.tempFilePath,</span></span>
<span class="line"><span style="color:#F8F8F2;">            showMenu</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">true</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">            </span><span style="color:#50FA7B;">success</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">res</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">              console.</span><span style="color:#50FA7B;">log</span><span style="color:#F8F8F2;">(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">打开文档成功</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">            }</span></span>
<span class="line"><span style="color:#F8F8F2;">          })</span></span>
<span class="line"><span style="color:#F8F8F2;">        }</span></span>
<span class="line"><span style="color:#F8F8F2;">      }</span></span>
<span class="line"><span style="color:#F8F8F2;">    })</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span></code></pre></div><h2 id="生成随机数" tabindex="-1">生成随机数 <a class="header-anchor" href="#生成随机数" aria-label="Permalink to &quot;生成随机数&quot;">​</a></h2><p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/device/crypto/wx.getRandomValues.html" target="_blank" rel="noreferrer">文档地址</a></p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki dracula"><code><span class="line"><span style="color:#F8F8F2;">wx.</span><span style="color:#50FA7B;">getRandomValues</span><span style="color:#F8F8F2;">({</span></span>
<span class="line"><span style="color:#F8F8F2;">  length</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">30</span><span style="color:#F8F8F2;">, </span><span style="color:#6272A4;">// 生成 30 个字节长度的随机数</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#50FA7B;">success</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">res</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    that.</span><span style="color:#50FA7B;">setData</span><span style="color:#F8F8F2;">({ inspectFileUuid</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> wx.</span><span style="color:#50FA7B;">arrayBufferToBase64</span><span style="color:#F8F8F2;">(res.randomValues) });</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">});</span></span>
<span class="line"></span></code></pre></div><h2 id="echarts" tabindex="-1">Echarts <a class="header-anchor" href="#echarts" aria-label="Permalink to &quot;Echarts&quot;">​</a></h2><p>使用 <a href="https://github.com/ecomfe/echarts-for-weixin" target="_blank" rel="noreferrer">echarts-for-weixin</a></p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki dracula"><code><span class="line"><span style="color:#F8F8F2;">&lt;</span><span style="color:#FF79C6;">ec-canvas</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">id</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">mychart-dom</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">canvas-id</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">mychart-pie</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">ec</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">{{ ecZL }}</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">&gt;&lt;/</span><span style="color:#FF79C6;">ec-canvas</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"></span></code></pre></div><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki dracula"><code><span class="line"><span style="color:#FF79C6;">import</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">*</span><span style="color:#F8F8F2;"> </span><span style="color:#FF79C6;">as</span><span style="color:#F8F8F2;"> echarts </span><span style="color:#FF79C6;">from</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">../../components/ec-canvas/echarts</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#50FA7B;">Page</span><span style="color:#F8F8F2;">({</span></span>
<span class="line"><span style="color:#F8F8F2;">  data</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">    ecZL</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">      lazyLoad</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">true</span><span style="color:#F8F8F2;"> </span><span style="color:#6272A4;">// 延迟加载图表,可以在获取数据后再初始化数据</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">  },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#50FA7B;">onLoad</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">option</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#BD93F9;font-style:italic;">this</span><span style="color:#F8F8F2;">.</span><span style="color:#50FA7B;">getBarData</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">  },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#50FA7B;">getBarData</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#50FA7B;">getStatistic</span><span style="color:#F8F8F2;">().</span><span style="color:#50FA7B;">then</span><span style="color:#F8F8F2;">((</span><span style="color:#FFB86C;font-style:italic;">res</span><span style="color:#F8F8F2;">) </span><span style="color:#FF79C6;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#BD93F9;font-style:italic;">this</span><span style="color:#F8F8F2;">.</span><span style="color:#50FA7B;">initChart</span><span style="color:#F8F8F2;">(res.data);</span></span>
<span class="line"><span style="color:#F8F8F2;">    });</span></span>
<span class="line"><span style="color:#F8F8F2;">  },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#50FA7B;">initChart</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">data</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">const</span><span style="color:#F8F8F2;"> chartDom </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;font-style:italic;">this</span><span style="color:#F8F8F2;">.</span><span style="color:#50FA7B;">selectComponent</span><span style="color:#F8F8F2;">(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">#mychart-dom</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">    chartDom.</span><span style="color:#50FA7B;">init</span><span style="color:#F8F8F2;">((</span><span style="color:#FFB86C;font-style:italic;">canvas</span><span style="color:#F8F8F2;">, </span><span style="color:#FFB86C;font-style:italic;">width</span><span style="color:#F8F8F2;">, </span><span style="color:#FFB86C;font-style:italic;">height</span><span style="color:#F8F8F2;">, </span><span style="color:#FFB86C;font-style:italic;">dpr</span><span style="color:#F8F8F2;">) </span><span style="color:#FF79C6;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#FF79C6;">const</span><span style="color:#F8F8F2;"> chart </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> echarts.</span><span style="color:#50FA7B;">init</span><span style="color:#F8F8F2;">(canvas, </span><span style="color:#BD93F9;">null</span><span style="color:#F8F8F2;">, { width, height, devicePixelRatio</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> dpr });</span></span>
<span class="line"><span style="color:#F8F8F2;">      canvas.</span><span style="color:#50FA7B;">setChart</span><span style="color:#F8F8F2;">(chart);</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#FF79C6;">const</span><span style="color:#F8F8F2;"> option </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span><span style="color:#6272A4;">// ....</span></span>
<span class="line"><span style="color:#F8F8F2;">      };</span></span>
<span class="line"><span style="color:#F8F8F2;">      chart.</span><span style="color:#50FA7B;">setOption</span><span style="color:#F8F8F2;">(option);</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#FF79C6;">return</span><span style="color:#F8F8F2;"> chart;</span></span>
<span class="line"><span style="color:#F8F8F2;">    });</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">});</span></span>
<span class="line"></span></code></pre></div><h2 id="踩坑记录" tabindex="-1">踩坑记录 <a class="header-anchor" href="#踩坑记录" aria-label="Permalink to &quot;踩坑记录&quot;">​</a></h2><h3 id="请求失败" tabindex="-1">请求失败 <a class="header-anchor" href="#请求失败" aria-label="Permalink to &quot;请求失败&quot;">​</a></h3><ol><li>检查是否在微信公众平台配置了服务器域名，和本地请求的域名是否一致</li><li>开发者工具右上角点击详情，打开本地配置，勾选上“不校验合法域名、web-view（业务域名）、TLS 版本以及 HTTPS 证书”</li></ol><h3 id="真机调试拿不到数据" tabindex="-1">真机调试拿不到数据 <a class="header-anchor" href="#真机调试拿不到数据" aria-label="Permalink to &quot;真机调试拿不到数据&quot;">​</a></h3><p>在开发者工具和浏览器都能正常获取数据，但是在真机调试时拿不到数据，请求失败，这时可以考虑证书是否过期</p><h3 id="真机调试连接状态一直在正常和未连接之间跳转" tabindex="-1">真机调试连接状态一直在正常和未连接之间跳转 <a class="header-anchor" href="#真机调试连接状态一直在正常和未连接之间跳转" aria-label="Permalink to &quot;真机调试连接状态一直在正常和未连接之间跳转&quot;">​</a></h3><p>可以尝试以下方式：</p><ul><li>重新打开项目</li><li>重启开发者工具</li><li>升级版本</li><li>版本降级</li></ul><h3 id="用-code-换取-openid-报错" tabindex="-1">用 code 换取 openID 报错 <a class="header-anchor" href="#用-code-换取-openid-报错" aria-label="Permalink to &quot;用 code 换取 openID 报错&quot;">​</a></h3><p>通过<code>wx.login()</code>可以获取用户的登录凭证（code），这个临时登录凭证一般只有 5 分钟有效期，可以将该凭证发送到自己的服务器，用于获取用户信息、进行用户认证等操作。</p><p>报错信息：<code>errcode: 40029 errmsg: &quot;invalid code, rid: 64180ee9-5771befc-2c5bd655&quot;</code></p><p>出现上面的报错，考虑 code 是否被多次调用，还有自己的服务端是否部署正确</p><h3 id="绑定数据大小写问题" tabindex="-1">绑定数据大小写问题 <a class="header-anchor" href="#绑定数据大小写问题" aria-label="Permalink to &quot;绑定数据大小写问题&quot;">​</a></h3><p>如果想在点击事件里传递参数，可以使用<code>data-</code>，但是要全部小写，如果使用驼峰写法会被小程序全部转为小写</p><p>这里如果绑定<code>data-isOpen=&quot;0&quot;</code>，获取值<code>e.target.dataset.isOpen</code>会报错，需要小写：<code>e.target.dataset.isopen</code></p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki dracula"><code><span class="line"><span style="color:#F8F8F2;">&lt;</span><span style="color:#FF79C6;">van-button</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">round</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">type</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">info</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">data-isopen</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">0</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">bind:tap</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">handleSubmit</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">&gt;保存&lt;/</span><span style="color:#FF79C6;">van-button</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"></span></code></pre></div><h3 id="路由传递布尔值类型错误" tabindex="-1">路由传递布尔值类型错误 <a class="header-anchor" href="#路由传递布尔值类型错误" aria-label="Permalink to &quot;路由传递布尔值类型错误&quot;">​</a></h3><p>通过路由传递给其他页面的布尔值会被转换为字符串格式：&#39;true&#39;、&#39;false&#39;。可以自己转换一下：<code>const a = b === &#39;true&#39; ? true : false</code></p><h2 id="列表通用模板" tabindex="-1">列表通用模板 <a class="header-anchor" href="#列表通用模板" aria-label="Permalink to &quot;列表通用模板&quot;">​</a></h2><p>小程序列表通用模板代码：首部搜索框，下方数据列表，无数据就显示暂无数据</p><ul><li>如果数据全部返回，在前端搜索过滤</li><li>如果数据分页返回，上拉加载、下拉刷新，搜索、清空</li><li>顶部项目选择</li></ul><h3 id="_1、数据全部返回-搜索过滤由前端处理" tabindex="-1">1、数据全部返回，搜索过滤由前端处理 <a class="header-anchor" href="#_1、数据全部返回-搜索过滤由前端处理" aria-label="Permalink to &quot;1、数据全部返回，搜索过滤由前端处理&quot;">​</a></h3><p>小程序 UI 组件库：<a href="https://vant-contrib.gitee.io/vant-weapp/#/home" target="_blank" rel="noreferrer">Vant Weapp</a></p><p>index.wxml</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki dracula"><code><span class="line"><span style="color:#F8F8F2;">&lt;</span><span style="color:#FF79C6;">van-search</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#50FA7B;font-style:italic;">value</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">{{ searchValue }}</span><span style="color:#E9F284;">&quot;</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#50FA7B;font-style:italic;">placeholder</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">请输入项目名称</span><span style="color:#E9F284;">&quot;</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#50FA7B;font-style:italic;">shape</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">round</span><span style="color:#E9F284;">&quot;</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#50FA7B;font-style:italic;">bind:search</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">onSearch</span><span style="color:#E9F284;">&quot;</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#50FA7B;font-style:italic;">bind:change</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">onSearch</span><span style="color:#E9F284;">&quot;</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#50FA7B;font-style:italic;">bind:clear</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">onClear</span><span style="color:#E9F284;">&quot;</span></span>
<span class="line"><span style="color:#F8F8F2;">/&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">&lt;</span><span style="color:#FF5555;font-style:italic;text-decoration:underline;">view</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">wx:if</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">{{projectList.length&gt;0}}</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">  &lt;</span><span style="color:#FF79C6;">van-cell-group</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">    &lt;</span><span style="color:#FF5555;font-style:italic;text-decoration:underline;">navigator</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">wx:for</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">{{projectList}}</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">wx:key</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">id</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">url</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">/pages/project/detail?proId={{item.id}}</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">      &lt;</span><span style="color:#FF79C6;">van-cell</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">title</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">{{item.proName}}</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">label</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">{{item.proNo}}</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;"> /&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">    &lt;/</span><span style="color:#FF5555;font-style:italic;text-decoration:underline;">navigator</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">  &lt;/</span><span style="color:#FF79C6;">van-cell-group</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">&lt;/</span><span style="color:#FF5555;font-style:italic;text-decoration:underline;">view</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">&lt;</span><span style="color:#FF79C6;">van-empty</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">wx:else</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">description</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">暂无数据</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;"> /&gt;</span></span>
<span class="line"></span></code></pre></div><p>index.json</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki dracula"><code><span class="line"><span style="color:#F8F8F2;">{</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#8BE9FE;">&quot;</span><span style="color:#8BE9FD;">navigationBarTitleText</span><span style="color:#8BE9FE;">&quot;</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">项目管理</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#8BE9FE;">&quot;</span><span style="color:#8BE9FD;">usingComponents</span><span style="color:#8BE9FE;">&quot;</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#8BE9FE;">&quot;</span><span style="color:#8BE9FD;">van-search</span><span style="color:#8BE9FE;">&quot;</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">@vant/weapp/search/index</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#8BE9FE;">&quot;</span><span style="color:#8BE9FD;">van-cell</span><span style="color:#8BE9FE;">&quot;</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">@vant/weapp/cell/index</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#8BE9FE;">&quot;</span><span style="color:#8BE9FD;">van-cell-group</span><span style="color:#8BE9FE;">&quot;</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">@vant/weapp/cell-group/index</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#8BE9FE;">&quot;</span><span style="color:#8BE9FD;">van-empty</span><span style="color:#8BE9FE;">&quot;</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">@vant/weapp/empty/index</span><span style="color:#E9F284;">&quot;</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span></code></pre></div><p>index.js</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki dracula"><code><span class="line"><span style="color:#FF79C6;">import</span><span style="color:#F8F8F2;"> { getProjectList } </span><span style="color:#FF79C6;">from</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">../../utils/api.js</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#50FA7B;">Page</span><span style="color:#F8F8F2;">({</span></span>
<span class="line"><span style="color:#F8F8F2;">  data</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">    searchValue</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&#39;&#39;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">    projectList</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> [],</span></span>
<span class="line"><span style="color:#F8F8F2;">    originProList</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> [],</span></span>
<span class="line"><span style="color:#F8F8F2;">    loading</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">false</span></span>
<span class="line"><span style="color:#F8F8F2;">  },</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#50FA7B;">onLoad</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#BD93F9;font-style:italic;">this</span><span style="color:#F8F8F2;">.</span><span style="color:#50FA7B;">searchProjectList</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">  },</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#50FA7B;">searchProjectList</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#BD93F9;font-style:italic;">this</span><span style="color:#F8F8F2;">.</span><span style="color:#50FA7B;">setData</span><span style="color:#F8F8F2;">({ loading</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">true</span><span style="color:#F8F8F2;"> });</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#50FA7B;">getProjectList</span><span style="color:#F8F8F2;">().</span><span style="color:#50FA7B;">then</span><span style="color:#F8F8F2;">((</span><span style="color:#FFB86C;font-style:italic;">res</span><span style="color:#F8F8F2;">) </span><span style="color:#FF79C6;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#BD93F9;font-style:italic;">this</span><span style="color:#F8F8F2;">.</span><span style="color:#50FA7B;">setData</span><span style="color:#F8F8F2;">({ loading</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">false</span><span style="color:#F8F8F2;">, projectList</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> res.data.data, originProList</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> res.data.data });</span></span>
<span class="line"><span style="color:#F8F8F2;">    });</span></span>
<span class="line"><span style="color:#F8F8F2;">  },</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#50FA7B;">onSearch</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">e</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#BD93F9;font-style:italic;">this</span><span style="color:#F8F8F2;">.</span><span style="color:#50FA7B;">setData</span><span style="color:#F8F8F2;">({ searchValue</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> e.detail });</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">if</span><span style="color:#F8F8F2;"> (</span><span style="color:#FF79C6;">!</span><span style="color:#F8F8F2;">e.detail) {</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#BD93F9;font-style:italic;">this</span><span style="color:#F8F8F2;">.</span><span style="color:#50FA7B;">setData</span><span style="color:#F8F8F2;">({ projectList</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;font-style:italic;">this</span><span style="color:#F8F8F2;">.data.originProList });</span></span>
<span class="line"><span style="color:#F8F8F2;">    } </span><span style="color:#FF79C6;">else</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#FF79C6;">const</span><span style="color:#F8F8F2;"> arr </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;font-style:italic;">this</span><span style="color:#F8F8F2;">.data.projectList.</span><span style="color:#50FA7B;">filter</span><span style="color:#F8F8F2;">((</span><span style="color:#FFB86C;font-style:italic;">ele</span><span style="color:#F8F8F2;">) </span><span style="color:#FF79C6;">=&gt;</span><span style="color:#F8F8F2;"> ele.proName.</span><span style="color:#50FA7B;">indexOf</span><span style="color:#F8F8F2;">(e.detail) </span><span style="color:#FF79C6;">!==</span><span style="color:#F8F8F2;"> </span><span style="color:#FF79C6;">-</span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#BD93F9;font-style:italic;">this</span><span style="color:#F8F8F2;">.</span><span style="color:#50FA7B;">setData</span><span style="color:#F8F8F2;">({ projectList</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> arr });</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">  },</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#50FA7B;">onClear</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#BD93F9;font-style:italic;">this</span><span style="color:#F8F8F2;">.</span><span style="color:#50FA7B;">setData</span><span style="color:#F8F8F2;">({ projectList</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;font-style:italic;">this</span><span style="color:#F8F8F2;">.data.originProList });</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">});</span></span>
<span class="line"></span></code></pre></div><h3 id="_2、分页返回数据" tabindex="-1">2、分页返回数据 <a class="header-anchor" href="#_2、分页返回数据" aria-label="Permalink to &quot;2、分页返回数据&quot;">​</a></h3><p>index.wxml 去掉了<code>bind:change=&quot;onSearch&quot;</code>，其余同上。index.json 如果要开启下拉刷新，需要添加：<code>&quot;enablePullDownRefresh&quot;: true</code></p><p>index.js</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki dracula"><code><span class="line"><span style="color:#FF79C6;">import</span><span style="color:#F8F8F2;"> { getProjectList } </span><span style="color:#FF79C6;">from</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">../../utils/api.js</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#50FA7B;">Page</span><span style="color:#F8F8F2;">({</span></span>
<span class="line"><span style="color:#F8F8F2;">  data</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">    searchValue</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&#39;&#39;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">    listData</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> [],</span></span>
<span class="line"><span style="color:#F8F8F2;">    pageNum</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">    total</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">0</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">    loading</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">false</span></span>
<span class="line"><span style="color:#F8F8F2;">  },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#50FA7B;">onLoad</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#BD93F9;font-style:italic;">this</span><span style="color:#F8F8F2;">.</span><span style="color:#50FA7B;">getList</span><span style="color:#F8F8F2;">(</span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">  },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#6272A4;">/**</span></span>
<span class="line"><span style="color:#6272A4;">   * 页面上拉触底事件的处理函数</span></span>
<span class="line"><span style="color:#6272A4;">   */</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#50FA7B;">onReachBottom</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">if</span><span style="color:#F8F8F2;"> (</span><span style="color:#FF79C6;">!</span><span style="color:#BD93F9;font-style:italic;">this</span><span style="color:#F8F8F2;">.data.loading </span><span style="color:#FF79C6;">&amp;&amp;</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;font-style:italic;">this</span><span style="color:#F8F8F2;">.data.pageNum </span><span style="color:#FF79C6;">&lt;</span><span style="color:#F8F8F2;"> Math.</span><span style="color:#50FA7B;">ceil</span><span style="color:#F8F8F2;">(</span><span style="color:#BD93F9;font-style:italic;">this</span><span style="color:#F8F8F2;">.data.total </span><span style="color:#FF79C6;">/</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">10</span><span style="color:#F8F8F2;">)) {</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#BD93F9;font-style:italic;">this</span><span style="color:#F8F8F2;">.</span><span style="color:#50FA7B;">getList</span><span style="color:#F8F8F2;">(</span><span style="color:#BD93F9;font-style:italic;">this</span><span style="color:#F8F8F2;">.data.pageNum </span><span style="color:#FF79C6;">+</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">  },</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#6272A4;">/**</span></span>
<span class="line"><span style="color:#6272A4;">   * 页面相关事件处理函数--监听用户下拉动作</span></span>
<span class="line"><span style="color:#6272A4;">   */</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#50FA7B;">onPullDownRefresh</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;">//启用标题栏显示加载状态</span></span>
<span class="line"><span style="color:#F8F8F2;">    wx.</span><span style="color:#50FA7B;">showNavigationBarLoading</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;">//调用相关方法</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#BD93F9;font-style:italic;">this</span><span style="color:#F8F8F2;">.</span><span style="color:#50FA7B;">setData</span><span style="color:#F8F8F2;">({ listData</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> [], searchValue</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&#39;&#39;</span><span style="color:#F8F8F2;">, pageNum</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">, total</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">0</span><span style="color:#F8F8F2;"> });</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#BD93F9;font-style:italic;">this</span><span style="color:#F8F8F2;">.</span><span style="color:#50FA7B;">getList</span><span style="color:#F8F8F2;">(</span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#50FA7B;">setTimeout</span><span style="color:#F8F8F2;">(() </span><span style="color:#FF79C6;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">      wx.</span><span style="color:#50FA7B;">hideNavigationBarLoading</span><span style="color:#F8F8F2;">(); </span><span style="color:#6272A4;">//隐藏标题栏显示加载状态</span></span>
<span class="line"><span style="color:#F8F8F2;">      wx.</span><span style="color:#50FA7B;">stopPullDownRefresh</span><span style="color:#F8F8F2;">(); </span><span style="color:#6272A4;">//结束刷新</span></span>
<span class="line"><span style="color:#F8F8F2;">    }, </span><span style="color:#BD93F9;">2000</span><span style="color:#F8F8F2;">); </span><span style="color:#6272A4;">//设置执行时间</span></span>
<span class="line"><span style="color:#F8F8F2;">  },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#50FA7B;">getList</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">pageNum</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#BD93F9;font-style:italic;">this</span><span style="color:#F8F8F2;">.</span><span style="color:#50FA7B;">setData</span><span style="color:#F8F8F2;">({ loading</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">true</span><span style="color:#F8F8F2;"> });</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#50FA7B;">getProjectList</span><span style="color:#F8F8F2;">({ pageNum, pageSize</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">10</span><span style="color:#F8F8F2;">, proName</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;font-style:italic;">this</span><span style="color:#F8F8F2;">.data.searchValue }).</span><span style="color:#50FA7B;">then</span><span style="color:#F8F8F2;">((</span><span style="color:#FFB86C;font-style:italic;">res</span><span style="color:#F8F8F2;">) </span><span style="color:#FF79C6;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#BD93F9;font-style:italic;">this</span><span style="color:#F8F8F2;">.</span><span style="color:#50FA7B;">setData</span><span style="color:#F8F8F2;">({</span></span>
<span class="line"><span style="color:#F8F8F2;">        loading</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">false</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#F8F8F2;">        listData</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;font-style:italic;">this</span><span style="color:#F8F8F2;">.data.listData.</span><span style="color:#50FA7B;">concat</span><span style="color:#F8F8F2;">(res.data.rows),</span></span>
<span class="line"><span style="color:#F8F8F2;">        pageNum,</span></span>
<span class="line"><span style="color:#F8F8F2;">        total</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> res.data.total</span></span>
<span class="line"><span style="color:#F8F8F2;">      });</span></span>
<span class="line"><span style="color:#F8F8F2;">    });</span></span>
<span class="line"><span style="color:#F8F8F2;">  },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#50FA7B;">onSearch</span><span style="color:#F8F8F2;">(</span><span style="color:#FFB86C;font-style:italic;">e</span><span style="color:#F8F8F2;">) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#BD93F9;font-style:italic;">this</span><span style="color:#F8F8F2;">.</span><span style="color:#50FA7B;">setData</span><span style="color:#F8F8F2;">({ listData</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> [], searchValue</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> e.detail, pageNum</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">, total</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">0</span><span style="color:#F8F8F2;"> });</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#BD93F9;font-style:italic;">this</span><span style="color:#F8F8F2;">.</span><span style="color:#50FA7B;">getList</span><span style="color:#F8F8F2;">(</span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">  },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#50FA7B;">onClear</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#BD93F9;font-style:italic;">this</span><span style="color:#F8F8F2;">.</span><span style="color:#50FA7B;">setData</span><span style="color:#F8F8F2;">({ listData</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> [], searchValue</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&#39;&#39;</span><span style="color:#F8F8F2;">, pageNum</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">, total</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">0</span><span style="color:#F8F8F2;"> });</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#BD93F9;font-style:italic;">this</span><span style="color:#F8F8F2;">.</span><span style="color:#50FA7B;">getList</span><span style="color:#F8F8F2;">(</span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">});</span></span>
<span class="line"></span></code></pre></div><h2 id="web-view-嵌套网页" tabindex="-1">web-view 嵌套网页 <a class="header-anchor" href="#web-view-嵌套网页" aria-label="Permalink to &quot;web-view 嵌套网页&quot;">​</a></h2><p><a href="https://developers.weixin.qq.com/miniprogram/dev/component/web-view.html" target="_blank" rel="noreferrer">官方文档</a></p><h3 id="创建-web-view" tabindex="-1">创建 web-view <a class="header-anchor" href="#创建-web-view" aria-label="Permalink to &quot;创建 web-view&quot;">​</a></h3><p>新创建一个页面，例如叫 webview，在 index.wxml 中写入如下内容：</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki dracula"><code><span class="line"><span style="color:#F8F8F2;">&lt;</span><span style="color:#FF79C6;">web-view</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">src</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">{{webSrc}}</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">&gt;&lt;/</span><span style="color:#FF79C6;">web-view</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>在 index.js 写入</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki dracula"><code><span class="line"><span style="color:#50FA7B;">Page</span><span style="color:#F8F8F2;">({</span></span>
<span class="line"><span style="color:#F8F8F2;">  data</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">    webSrc</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">https://www.baidu.com</span><span style="color:#E9F284;">&#39;</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">});</span></span>
<span class="line"></span></code></pre></div><p>然后找个地方可以点击跳转进入 webview</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki dracula"><code><span class="line"><span style="color:#F8F8F2;">&lt;</span><span style="color:#FF5555;font-style:italic;text-decoration:underline;">navigator</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">url</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">/pages/webview/index</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">&gt;webView&lt;/</span><span style="color:#FF5555;font-style:italic;text-decoration:underline;">navigator</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"></span></code></pre></div><h3 id="配置业务域名" tabindex="-1">配置业务域名 <a class="header-anchor" href="#配置业务域名" aria-label="Permalink to &quot;配置业务域名&quot;">​</a></h3><p>在微信开发者工具中，可以正常看到嵌套的网页，但是在真机上无法访问，需要配置业务域名</p><p>打开<a href="https://mp.weixin.qq.com/" target="_blank" rel="noreferrer">小程序管理后台</a>，在「开发管理」-&gt;「开发设置」-&gt;「业务域名」，</p><ol><li>下载一个 txt 文件，将这个文件放到服务器的项目的根目录下 <ol><li>服务器需要是自己的，才能放文件</li><li>如果要访问的页面是 vue 这类项目创建的，需要将 txt 文件放到 public 文件夹下</li></ol></li><li>添加要嵌套的地址，回到真机看效果</li></ol><h3 id="小程序如何与网页通信" tabindex="-1">小程序如何与网页通信？ <a class="header-anchor" href="#小程序如何与网页通信" aria-label="Permalink to &quot;小程序如何与网页通信？&quot;">​</a></h3><p>webview 想和小程序通信只能通过 <code>wx.miniProgram.postMessage</code>。只能从页面向小程序发送消息。 页面需要引入微信 <a href="https://res.wx.qq.com/open/js/jweixin-1.3.2.js" target="_blank" rel="noreferrer">JS-SDK1.3.2</a></p><h4 id="引入方式" tabindex="-1">引入方式 <a class="header-anchor" href="#引入方式" aria-label="Permalink to &quot;引入方式&quot;">​</a></h4><p>1、原始 html 页面引入</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki dracula"><code><span class="line"><span style="color:#F8F8F2;">&lt;</span><span style="color:#FF79C6;">script</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">type</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">text/javascript</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">src</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">https://res.wx.qq.com/open/js/jweixin-1.3.2.js</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">&gt;&lt;/</span><span style="color:#FF79C6;">script</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>2、在 React、Vue 引入</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki dracula"><code><span class="line"><span style="color:#F8F8F2;">npm </span><span style="color:#F1FA8C;">i</span><span style="color:#F8F8F2;"> </span><span style="color:#F1FA8C;">weixin-js-sdk</span></span>
<span class="line"></span></code></pre></div><p>如在 vue 中使用：</p><div class="language-vue"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki dracula"><code><span class="line"><span style="color:#F8F8F2;">&lt;</span><span style="color:#FF79C6;">template</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">  &lt;</span><span style="color:#FF79C6;">div</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">    &lt;</span><span style="color:#FF79C6;">el-button</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">@click</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">sendMessage</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">&gt;Send Message&lt;/</span><span style="color:#FF79C6;">el-button</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">  &lt;/</span><span style="color:#FF79C6;">div</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">&lt;/</span><span style="color:#FF79C6;">template</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">&lt;</span><span style="color:#FF79C6;">script</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"><span style="color:#FF79C6;">import</span><span style="color:#F8F8F2;"> wx </span><span style="color:#FF79C6;">from</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">weixin-js-sdk</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6;">export</span><span style="color:#F8F8F2;"> </span><span style="color:#FF79C6;">default</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#50FA7B;">data</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">return</span><span style="color:#F8F8F2;"> {};</span></span>
<span class="line"><span style="color:#F8F8F2;">  },</span></span>
<span class="line"><span style="color:#F8F8F2;">  methods</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#50FA7B;">sendMessage</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F8F8F2;">      console.</span><span style="color:#50FA7B;">log</span><span style="color:#F8F8F2;">(wx);</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#6272A4;">// 跳转到小程序的页面</span></span>
<span class="line"><span style="color:#F8F8F2;">      wx.miniProgram.</span><span style="color:#50FA7B;">navigateTo</span><span style="color:#F8F8F2;">(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">pages/index/index</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#6272A4;">// 跳转到 tabbar 页面</span></span>
<span class="line"><span style="color:#F8F8F2;">      wx.miniProgram.</span><span style="color:#50FA7B;">switchTab</span><span style="color:#F8F8F2;">(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">pages/index/index</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">);</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#6272A4;">// 判断当前是否是小程序页面</span></span>
<span class="line"><span style="color:#F8F8F2;">      wx.miniProgram.</span><span style="color:#50FA7B;">getEnv</span><span style="color:#F8F8F2;">((</span><span style="color:#FFB86C;font-style:italic;">res</span><span style="color:#F8F8F2;">) </span><span style="color:#FF79C6;">=&gt;</span><span style="color:#F8F8F2;"> {</span></span>
<span class="line"><span style="color:#F8F8F2;">        console.</span><span style="color:#50FA7B;">log</span><span style="color:#F8F8F2;">(res.miniprogram);</span></span>
<span class="line"><span style="color:#F8F8F2;">      });</span></span>
<span class="line"><span style="color:#F8F8F2;">      </span><span style="color:#6272A4;">// 页面向小程序发送消息</span></span>
<span class="line"><span style="color:#F8F8F2;">      wx.miniProgram.</span><span style="color:#50FA7B;">postMessage</span><span style="color:#F8F8F2;">({ data</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> { foo</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">bar</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;"> } });</span></span>
<span class="line"><span style="color:#F8F8F2;">    }</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"><span style="color:#F8F8F2;">};</span></span>
<span class="line"><span style="color:#F8F8F2;">&lt;/</span><span style="color:#FF79C6;">script</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"></span></code></pre></div><p><code>wx.miniProgram.postMessage({ data: { name: &#39;zgh&#39; } })</code> 大括号里面的数据是 <code>data: {xxx:xx}</code>形式， key 必须是 data 字段</p><h4 id="小程序接收消息" tabindex="-1">小程序接收消息 <a class="header-anchor" href="#小程序接收消息" aria-label="Permalink to &quot;小程序接收消息&quot;">​</a></h4><p>只能在组件销毁、分享、后退才能处理接收到的数据</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki dracula"><code><span class="line"><span style="color:#F8F8F2;">&lt;</span><span style="color:#FF79C6;">web-view</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">src</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">{{webSrc}}</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;font-style:italic;">bindmessage</span><span style="color:#FF79C6;">=</span><span style="color:#E9F284;">&quot;</span><span style="color:#F1FA8C;">msgHandler</span><span style="color:#E9F284;">&quot;</span><span style="color:#F8F8F2;">&gt;&lt;/</span><span style="color:#FF79C6;">web-view</span><span style="color:#F8F8F2;">&gt;</span></span>
<span class="line"></span></code></pre></div><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki dracula"><code><span class="line"><span style="color:#F8F8F2;">  </span><span style="color:#50FA7B;">msgHandler</span><span style="color:#F8F8F2;">(res) {</span></span>
<span class="line"><span style="color:#F8F8F2;">    console.</span><span style="color:#50FA7B;">log</span><span style="color:#F8F8F2;">(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">取到网页传过来的值</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, res);</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;">// res.detail.data 是一个数组，存储着每一次 webview 触发 postMessage 的值</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">let</span><span style="color:#F8F8F2;"> data </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> res.detail.data;</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;">//如果要获取最新的 postMessage 的值，取数组最后一个即可</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#FF79C6;">let</span><span style="color:#F8F8F2;"> lastData </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> data[data.length </span><span style="color:#FF79C6;">-</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">1</span><span style="color:#F8F8F2;">];</span></span>
<span class="line"><span style="color:#F8F8F2;">    console.</span><span style="color:#50FA7B;">log</span><span style="color:#F8F8F2;">(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">最新的postMessage的值</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, lastData);</span></span>
<span class="line"><span style="color:#F8F8F2;">  }</span></span>
<span class="line"></span></code></pre></div></div></div></main><footer class="VPDocFooter" data-v-c4b0d3cf data-v-face870a><!--[--><!--]--><div class="edit-info" data-v-face870a><!----><div class="last-updated" data-v-face870a><p class="VPLastUpdated" data-v-face870a data-v-7b3ebfe1>Last updated: <time datetime="2023-06-29T14:54:09.000Z" data-v-7b3ebfe1></time></p></div></div><div class="prev-next" data-v-face870a><div class="pager" data-v-face870a><!----></div><div class="pager" data-v-face870a><a class="pager-link next" href="/blog/miniProgram/taro" data-v-face870a><span class="desc" data-v-face870a>Next page</span><span class="title" data-v-face870a>Taro</span></a></div></div></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-b2cf3e0b data-v-2f86ebd2><div class="container" data-v-2f86ebd2><p class="message" data-v-2f86ebd2>Released under the MIT License.</p><p class="copyright" data-v-2f86ebd2>Copyright © 2020-present ZGH</p></div></footer><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"automate_eslint.md\":\"e82c5b36\",\"automate_cicd.md\":\"c3b6c4c8\",\"base_computer-organization_index.md\":\"b06728b7\",\"automate_babel.md\":\"08d980da\",\"automate_gulp.md\":\"8f6de87c\",\"automate_npm.md\":\"5f9dfd1d\",\"automate_vite.md\":\"fccd6a78\",\"automate_webpack.md\":\"bde89cc5\",\"base_algorithm_index.md\":\"8ee630b9\",\"automate_git.md\":\"8d7e0838\",\"automate_prettier.md\":\"636e3bc3\",\"automate_rollup.md\":\"2a0a0b80\",\"fe_css_clip-path.md\":\"cefcf1fa\",\"fe_css_gradient.md\":\"dfb58e69\",\"fe_css_index.md\":\"a0974913\",\"fe_css_parallax-scroller.md\":\"1c34f138\",\"fe_css_filter.md\":\"eb4fba46\",\"be_nginx.md\":\"7788bc75\",\"fe_browser_compatibility.md\":\"3f33463e\",\"fe_css_sass.md\":\"69c355e2\",\"fe_browser_crossdomain.md\":\"2f4fe70e\",\"fe_css_shadow.md\":\"05d9d8c9\",\"fe_browser_index.md\":\"297404d0\",\"fe_browser_safety.md\":\"9fc17153\",\"fe_browser_debug.md\":\"677e2b87\",\"fe_js_ajax.md\":\"4b61298a\",\"fe_html_index.md\":\"1e214267\",\"fe_browser_window.md\":\"a81b277c\",\"fe_css_less.md\":\"33e681e9\",\"base_design-pattern_index.md\":\"77b24aaa\",\"base_design-pattern_observers.md\":\"3ed582eb\",\"be_elasticsearch.md\":\"2589ebb6\",\"base_network_websocket.md\":\"d7898e21\",\"fe_css_layout.md\":\"49cb317d\",\"base_data-structure_index.md\":\"b73711a2\",\"fe_css_transform.md\":\"f41090a9\",\"be_oauth2.md\":\"a0f69340\",\"be_tomcat.md\":\"4ff9d834\",\"fe_html_svg.md\":\"11cef69f\",\"fe_html_canvas.md\":\"63013e3c\",\"fe_js_dom.md\":\"dfa0340b\",\"fe_css_animation.md\":\"56942e14\",\"base_design-pattern_publisher-subscriber.md\":\"9c73491d\",\"be_mysql.md\":\"a0dc90e0\",\"base_os_index.md\":\"27481467\",\"fe_css_business.md\":\"0c1339fe\",\"fe_js_json.md\":\"2aeecd8e\",\"fe_js_index.md\":\"6ba15a8c\",\"fe_js_truth.md\":\"8a4de9c7\",\"fe_js_object.md\":\"66531f0b\",\"base_network_index.md\":\"aa45af25\",\"be_docker.md\":\"666d75af\",\"base_design-pattern_strategy.md\":\"32b4cbfc\",\"fe_node_http.md\":\"4acda13b\",\"fe_node_koa.md\":\"e25e4492\",\"fe_node_egg.md\":\"2fac603c\",\"fe_js_es6.md\":\"17f65ff3\",\"fe_node_index.md\":\"b94bf7a3\",\"fe_node_mongodb.md\":\"3fb1d0d1\",\"fe_react_next.md\":\"381a7384\",\"fe_react_antd-pro.md\":\"db8bd988\",\"fe_node_fs.md\":\"ee5d2e57\",\"fe_js_class.md\":\"a3d19e5d\",\"fe_js_array.md\":\"cd63da6e\",\"fe_css_responsive.md\":\"00c38f86\",\"fe_js_string.md\":\"150157cf\",\"fe_js_module.md\":\"180db704\",\"fe_js_utils.md\":\"1e84b6c4\",\"fe_node_buffer.md\":\"51551612\",\"vis_gis_openlayers.md\":\"ded08c3f\",\"vis_gis_enc.md\":\"394f2d93\",\"fe_node_express.md\":\"ab0d7676\",\"fe_react_hook.md\":\"21ecca7a\",\"fe_react_index.md\":\"de859a7e\",\"fe_react_router.md\":\"195d7112\",\"fe_react_state.md\":\"f964b72f\",\"fe_ts_assertion.md\":\"cdd7e1d1\",\"fe_ts_class.md\":\"26039c66\",\"fe_ts_config.md\":\"3690a508\",\"fe_ts_enum.md\":\"3a49e395\",\"fe_ts_function.md\":\"50ad9d41\",\"fe_ts_generic.md\":\"24b605cf\",\"fe_ts_index.md\":\"0478b6f5\",\"fe_ts_interface.md\":\"c0807d56\",\"fe_vue_business.md\":\"9bba3dca\",\"fe_vue_contact.md\":\"269c112c\",\"fe_vue_vue-router.md\":\"10c48765\",\"fe_vue_vue3.md\":\"2b8d928e\",\"fe_vue_vuepress.md\":\"b2551b3f\",\"fe_vue_vuex.md\":\"e5306b81\",\"index.md\":\"c0372712\",\"linux_linux.md\":\"eb2e2112\",\"media_index.md\":\"d5953171\",\"miniprogram_taro.md\":\"1fcd6bfd\",\"miniprogram_wx.md\":\"6977121c\",\"tools_deploy.md\":\"e16ed602\",\"tools_iterm2.md\":\"c5de5ad6\",\"tools_plugin.md\":\"7737476e\",\"tools_vscode.md\":\"6f059468\",\"vis_bi_index.md\":\"727e0b39\",\"vis_echarts.md\":\"7c86731c\",\"vis_gis_cesium.md\":\"19c5694d\",\"vis_gis_geoserver.md\":\"b491cfa6\",\"vis_gis_index.md\":\"678604a9\",\"vis_gis_leaflet.md\":\"8dd3421c\",\"vis_gis_maptalks.md\":\"bea63268\",\"fe_vue_index.md\":\"58a6e007\",\"fe_ts_index-signatures.md\":\"dbc6157d\",\"miniprogram_uniapp.md\":\"cf8a88f2\",\"fe_vue_ui.md\":\"6af39213\",\"vis_three_index.md\":\"00fdd27c\"}")
__VP_SITE_DATA__ = JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"CONST\",\"description\":\"Blog\",\"base\":\"/blog/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"logo\":\"/img/logo.png\",\"footer\":{\"message\":\"Released under the MIT License.\",\"copyright\":\"Copyright © 2020-present ZGH\"},\"algolia\":{\"appId\":\"0QPOEAMUZK\",\"apiKey\":\"3c1f70ed4dca0ad41775f35548a1b525\",\"indexName\":\"ivanzghio\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/Ivanzgh\"}],\"nav\":[{\"text\":\"前端\",\"items\":[{\"text\":\"基础\",\"link\":\"/fe/js/\"},{\"text\":\"TypeScript\",\"link\":\"/fe/ts/\"},{\"text\":\"React\",\"link\":\"/fe/react/\"},{\"text\":\"Vue\",\"link\":\"/fe/vue/\"},{\"text\":\"Node\",\"link\":\"/fe/node/\"},{\"text\":\"前端工程化\",\"link\":\"/automate/npm\"},{\"text\":\"小程序\",\"link\":\"/miniProgram/wx\"},{\"text\":\"工具\",\"link\":\"/tools/plugin\"}]},{\"text\":\"后端\",\"items\":[{\"text\":\"Docker\",\"link\":\"/be/docker\"},{\"text\":\"Nginx\",\"link\":\"/be/nginx\"},{\"text\":\"MySQL\",\"link\":\"/be/mysql\"},{\"text\":\"Tomcat\",\"link\":\"/be/tomcat\"},{\"text\":\"ElasticSearch\",\"link\":\"/be/elasticsearch\"}]},{\"text\":\"可视化\",\"items\":[{\"text\":\"GIS\",\"link\":\"/vis/gis/\"},{\"text\":\"Three\",\"link\":\"/vis/three/\"},{\"text\":\"流媒体\",\"link\":\"/media/\"}]},{\"text\":\"计算机基础\",\"items\":[{\"text\":\"计算机网络\",\"link\":\"/base/network/\"},{\"text\":\"数据结构\",\"link\":\"/base/data-structure/\"},{\"text\":\"设计模式\",\"link\":\"/base/design-pattern/\"},{\"text\":\"算法\",\"link\":\"/base/algorithm/\"},{\"text\":\"操作系统\",\"link\":\"/base/os/\"},{\"text\":\"计算机组成原理\",\"link\":\"/base/computer-organization/\"}]}],\"sidebar\":{\"/\":[{\"text\":\"JavaScript\",\"collapsed\":false,\"link\":\"/\",\"items\":[{\"text\":\"基础\",\"link\":\"/fe/js/\"},{\"text\":\"字符串\",\"link\":\"/fe/js/string\"},{\"text\":\"数组\",\"link\":\"/fe/js/array\"},{\"text\":\"对象\",\"link\":\"/fe/js/object\"},{\"text\":\"ES6\",\"link\":\"/fe/js/es6\"},{\"text\":\"DOM\",\"link\":\"/fe/js/dom\"},{\"text\":\"JSON\",\"link\":\"/fe/js/json\"},{\"text\":\"AJAX\",\"link\":\"/fe/js/ajax\"},{\"text\":\"模块化规范\",\"link\":\"/fe/js/module\"},{\"text\":\"手写JS\",\"link\":\"/fe/js/truth\"},{\"text\":\"工具\",\"link\":\"/fe/js/utils\"}]},{\"text\":\"HTML\",\"collapsed\":false,\"items\":[{\"text\":\"基础\",\"link\":\"/fe/html/\"},{\"text\":\"Canvas\",\"link\":\"/fe/html/canvas\"},{\"text\":\"SVG\",\"link\":\"/fe/html/svg\"}]},{\"text\":\"CSS\",\"collapsed\":false,\"items\":[{\"text\":\"基础\",\"link\":\"/fe/css/\"},{\"text\":\"布局\",\"link\":\"/fe/css/layout\"},{\"text\":\"响应式布局\",\"link\":\"/fe/css/responsive\"},{\"text\":\"阴影\",\"link\":\"/fe/css/shadow\"},{\"text\":\"渐变\",\"link\":\"/fe/css/gradient\"},{\"text\":\"动画\",\"link\":\"/fe/css/animation\"},{\"text\":\"滤镜\",\"link\":\"/fe/css/filter\"},{\"text\":\"裁剪\",\"link\":\"/fe/css/clip-path\"},{\"text\":\"视差滚动\",\"link\":\"/fe/css/parallax-scroller\"},{\"text\":\"业务效果\",\"link\":\"/fe/css/business\"},{\"text\":\"Sass\",\"link\":\"/fe/css/sass\"},{\"text\":\"Less\",\"link\":\"/fe/css/less\"}]},{\"text\":\"浏览器\",\"collapsed\":false,\"items\":[{\"text\":\"基础\",\"link\":\"/fe/browser/\"},{\"text\":\"浏览器跨域\",\"link\":\"/fe/browser/crossDomain\"},{\"text\":\"浏览器安全\",\"link\":\"/fe/browser/safety\"},{\"text\":\"Window对象\",\"link\":\"/fe/browser/window\"},{\"text\":\"兼容性\",\"link\":\"/fe/browser/compatibility\"},{\"text\":\"调试\",\"link\":\"/fe/browser/debug\"}]}],\"/fe/ts/\":[{\"text\":\"TypeScript\",\"collapsed\":false,\"items\":[{\"text\":\"介绍\",\"link\":\"/fe/ts/\"},{\"text\":\"接口\",\"link\":\"/fe/ts/interface\"},{\"text\":\"断言\",\"link\":\"/fe/ts/assertion\"},{\"text\":\"索引签名\",\"link\":\"/fe/ts/index-signatures\"},{\"text\":\"枚举\",\"link\":\"/fe/ts/enum\"},{\"text\":\"函数\",\"link\":\"/fe/ts/function\"},{\"text\":\"类\",\"link\":\"/fe/ts/class\"},{\"text\":\"tsconfig.json\",\"link\":\"/fe/ts/config\"},{\"text\":\"泛型\",\"link\":\"/fe/ts/generic\"}]}],\"/fe/react/\":[{\"text\":\"React\",\"collapsed\":false,\"items\":[{\"text\":\"React\",\"link\":\"/fe/react/\"},{\"text\":\"Hook\",\"link\":\"/fe/react/hook\"},{\"text\":\"状态管理\",\"link\":\"/fe/react/state\"},{\"text\":\"React-Router\",\"link\":\"/fe/react/router\"},{\"text\":\"NextJS\",\"link\":\"/fe/react/next\"}]}],\"/fe/vue/\":[{\"text\":\"Vue\",\"collapsed\":false,\"items\":[{\"text\":\"Vue\",\"link\":\"/fe/vue/\"},{\"text\":\"组件通信\",\"link\":\"/fe/vue/contact\"},{\"text\":\"业务\",\"link\":\"/fe/vue/business\"},{\"text\":\"vue3\",\"link\":\"/fe/vue/vue3\"},{\"text\":\"UI库\",\"link\":\"/fe/vue/ui\"},{\"text\":\"vuex\",\"link\":\"/fe/vue/vuex\"},{\"text\":\"vue-router\",\"link\":\"/fe/vue/vue-router\"},{\"text\":\"vuepress\",\"link\":\"/fe/vue/vuepress\"}]}],\"/fe/node/\":[{\"text\":\"Node\",\"collapsed\":false,\"items\":[{\"text\":\"简介\",\"link\":\"/fe/node/\"},{\"text\":\"Buffer 缓冲区\",\"link\":\"/fe/node/buffer\"},{\"text\":\"fs 文件系统\",\"link\":\"/fe/node/fs\"},{\"text\":\"Http\",\"link\":\"/fe/node/http\"}]},{\"text\":\"框架\",\"collapsed\":false,\"items\":[{\"text\":\"Express\",\"link\":\"/fe/node/express\"},{\"text\":\"Koa\",\"link\":\"/fe/node/koa\"},{\"text\":\"Egg\",\"link\":\"/fe/node/egg\"},{\"text\":\"MongoDB\",\"link\":\"/fe/node/mongodb\"}]}],\"/automate/\":[{\"text\":\"前端工程化\",\"items\":[{\"text\":\"NPM\",\"link\":\"/automate/npm\"},{\"text\":\"Git\",\"link\":\"/automate/git\"},{\"text\":\"Babel\",\"link\":\"/automate/babel\"},{\"text\":\"Vite\",\"link\":\"/automate/vite\"},{\"text\":\"Webpack\",\"link\":\"/automate/webpack\"},{\"text\":\"Gulp\",\"link\":\"/automate/gulp\"},{\"text\":\"Rollup\",\"link\":\"/automate/rollup\"},{\"text\":\"CI/CD\",\"link\":\"/automate/cicd\"},{\"text\":\"Eslint\",\"link\":\"/automate/eslint\"},{\"text\":\"Prettier\",\"link\":\"/automate/prettier\"}]}],\"/miniProgram/\":[{\"text\":\"小程序\",\"collapsed\":false,\"items\":[{\"text\":\"微信小程序\",\"link\":\"/miniProgram/wx\"},{\"text\":\"Taro\",\"link\":\"/miniProgram/taro\"},{\"text\":\"uniapp\",\"link\":\"/miniProgram/uniapp\"}]}],\"/tools/\":[{\"text\":\"🧰 工具箱\",\"collapsed\":false,\"items\":[{\"text\":\"plugin\",\"link\":\"/tools/plugin\"},{\"text\":\"vscode\",\"link\":\"/tools/vscode\"},{\"text\":\"iTerm2\",\"link\":\"/tools/iTerm2\"},{\"text\":\"部署\",\"link\":\"/tools/deploy\"}]}],\"/vis/gis/\":[{\"text\":\"GIS\",\"collapsed\":false,\"items\":[{\"text\":\"介绍\",\"link\":\"/vis/gis/\"},{\"text\":\"电子海图\",\"link\":\"/vis/gis/enc\"},{\"text\":\"Maptalks\",\"link\":\"/vis/gis/maptalks\"},{\"text\":\"OpenLayers\",\"link\":\"/vis/gis/openlayers\"},{\"text\":\"Leaflet\",\"link\":\"/vis/gis/leaflet\"},{\"text\":\"GeoServer\",\"link\":\"/vis/gis/geoServer\"},{\"text\":\"Cesium\",\"link\":\"/vis/gis/cesium\"}]}],\"/base/network/\":[{\"text\":\"计算机网络\",\"collapsed\":false,\"items\":[{\"text\":\"概览\",\"link\":\"/base/network/\"},{\"text\":\"webSocket\",\"link\":\"/base/network/webSocket\"}]}],\"/base/design-pattern/\":[{\"text\":\"设计模式\",\"collapsed\":false,\"items\":[{\"text\":\"设计模式\",\"link\":\"/base/design-pattern/\"},{\"text\":\"策略模式\",\"link\":\"/base/design-pattern/strategy\"},{\"text\":\"观察者模式\",\"link\":\"/base/design-pattern/observers\"},{\"text\":\"发布-订阅模式\",\"link\":\"/base/design-pattern/publisher-subscriber\"}]}]}},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":true}")</script>
    
  </body>
</html>